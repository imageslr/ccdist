webpackJsonp([21],{JG2F:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("XyMi"),o=i("GUlH"),s={data:function(){return{form:{title:"",description:"",photo_urls:[],visible_range:"public"},rules:{title:{required:!0,message:this.$t("请填写此项")},description:{required:!0,message:this.$t("请填写此项"),whitespace:!0},photo_urls:{type:"array",required:!0,message:this.$t("请填写此项")},visible_range:{required:!0,mes9sage:this.$t("请填写此项")}},submitting:!1,loading:!1}},computed:{editing:function(){return"/work/add"!==this.$route.path},id:function(){return this.$route.params.id}},created:function(){var t=this;this.editing&&(this.loading=!0,Object(o.c)(this.id).then(function(e){var i=e.data;t.loading=!1,t.form={title:i.title,description:i.description,photo_urls:i.photo_urls,visible_range:i.visible_range}}).catch(function(){t.loading=!1}))},beforeDestroy:function(){this.$refs.upload.clear()},methods:{onSubmit:function(){var t=this,e=this.$refs.upload.getImageUrls();if(!1===e)return this.$message.warning(this.$t("图片正在上传中，请稍候"));this.form.photo_urls=e,this.$refs.form.validate().then(function(){t.submitting=!0,t.editing?Object(o.h)(t.id,t.form).then(function(){t.submitting=!1,t.$router.push("/work/result?edit=1")}).catch(function(){t.submitting=!1}):Object(o.a)(t.form).then(function(){t.submitting=!1,t.$router.push("/work/result")}).catch(function(){t.submitting=!1})}).catch(function(){})}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main-container"},[i("div",{staticClass:"card form-card"},[i("div",{staticClass:"border-bottom center p-24"},[i("h1",{directives:[{name:"t",rawName:"v-t",value:t.editing?"编辑作品":"添加作品",expression:"editing ? '编辑作品' : '添加作品'"}],staticClass:"m0 color-primary"}),t._v(" "),i("p",{directives:[{name:"t",rawName:"v-t",value:"分享你的设计心得，展示你的专业能力",expression:"'分享你的设计心得，展示你的专业能力'"}],staticClass:"m0 pt1 black-65 f-13"})]),t._v(" "),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.rules,"label-position":"top",size:"small"}},[i("el-form-item",{attrs:{label:t.$t("标题"),prop:"title"}},[i("el-input",{attrs:{placeholder:t.$t("最多200字"),maxlength:"200"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("描述"),prop:"description"}},[i("el-input",{attrs:{placeholder:t.$t("如项目类型、项目功能、项目面积、完成日期等"),rows:7,type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("相关照片"),prop:"photo_urls"}},[i("my-multi-upload",{ref:"upload",attrs:{limit:20,"image-urls":t.form.photo_urls,type:"work_photo"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("可见范围"),prop:"visible_range"}},[i("el-radio-group",{model:{value:t.form.visible_range,callback:function(e){t.$set(t.form,"visible_range",e)},expression:"form.visible_range"}},[i("el-radio",{attrs:{label:"public"}},[t._v(t._s(t.$t("公开可见")))]),t._v(" "),i("el-radio",{attrs:{label:"private"}},[t._v(t._s(t.$t("私密")))])],1)],1)],1)],1),t._v(" "),i("el-button",{staticClass:"block w-100 shadow mt-24",attrs:{loading:t.submitting,type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.$t("提交")))])],1)},staticRenderFns:[]};var n=function(t){i("Z8YP")},l=Object(r.a)(s,a,!1,n,"data-v-9676904e",null),c=i("nwpF");c&&c.__esModule&&(c=c.default),"function"==typeof c&&c(l);e.default=l.exports},Z8YP:function(t,e){},nwpF:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"添加作品":"Add your work","编辑作品":"Edit work","分享你的设计心得，展示你的专业能力":"Share your design experience and showcase your professional skills","标题":"Title","最多200字":"200 characters at most","描述":"Description","如项目类型、项目功能、项目面积、完成日期等":"Such as project type, project function, project area, completion date, etc.","相关照片":"Relevant photos","可见范围":"Visible range","公开可见":"Public","私密":"Private","提交":"Submit","请填写此项":"Please enter this field","图片正在上传中，请稍候":"Photo is uploading, please wait"}}'),delete t.options._Ctor}}});
//# sourceMappingURL=21.772102405095c71f9bf2.js.map