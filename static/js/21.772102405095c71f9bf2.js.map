{"version":3,"sources":["webpack:///src/views/work/Add.vue","webpack:///./src/views/work/Add.vue?ad7e","webpack:///./src/views/work/Add.vue","webpack:///./src/views/work/Add.vue?d598"],"names":["Add","data","form","title","description","photo_urls","visible_range","rules","required","message","this","$t","whitespace","type","mes9sage","submitting","loading","computed","editing","$route","path","id","params","created","_this","Object","work","then","_ref","catch","beforeDestroy","$refs","upload","clear","methods","onSubmit","_this2","getImageUrls","$message","warning","validate","$router","push","work_Add","render","_vm","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","_v","ref","attrs","model","label-position","size","label","prop","placeholder","maxlength","callback","$$v","$set","rows","limit","image-urls","_s","on","click","staticRenderFns","__vue_styles__","context","__webpack_require__","Component","component_normalizer","customBlock","__esModule","default","__webpack_exports__","module","exports","options","__i18n","_Ctor"],"mappings":"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","file":"static/js/21.772102405095c71f9bf2.js","sourcesContent":["<i18n>\n{\n  \"en\": {\n    \"添加作品\": \"Add your work\",\n    \"编辑作品\": \"Edit work\",\n    \"分享你的设计心得，展示你的专业能力\": \"Share your design experience and showcase your professional skills\",\n    \"标题\": \"Title\",\n    \"最多200字\": \"200 characters at most\",\n    \"描述\": \"Description\",\n    \"如项目类型、项目功能、项目面积、完成日期等\": \"Such as project type, project function, project area, completion date, etc.\",\n    \"相关照片\": \"Relevant photos\",\n    \"可见范围\": \"Visible range\",\n    \"公开可见\": \"Public\",\n    \"私密\": \"Private\",\n    \"提交\": \"Submit\",\n    \"请填写此项\": \"Please enter this field\",\n    \"图片正在上传中，请稍候\": \"Photo is uploading, please wait\"\n  }\n}\n</i18n>\n\n<template>\n  <div class=\"main-container\">\n    <div class=\"card form-card\">\n      <div class=\"border-bottom center p-24\">\n        <h1\n          v-t=\"editing ? '编辑作品' : '添加作品'\"\n          class=\"m0 color-primary\"/>\n        <p\n          v-t=\"'分享你的设计心得，展示你的专业能力'\"\n          class=\"m0 pt1 black-65 f-13\"/>\n      </div>\n      <el-form\n        v-loading=\"loading\"\n        ref=\"form\"\n        :model=\"form\"\n        :rules=\"rules\"\n        label-position=\"top\"\n        class=\"form\"\n        size=\"small\">\n        <el-form-item\n          :label=\"$t('标题')\"\n          prop=\"title\">\n          <el-input\n            v-model=\"form.title\"\n            :placeholder=\"$t('最多200字')\"\n            maxlength=\"200\"/>\n        </el-form-item>\n        <el-form-item\n          :label=\"$t('描述')\"\n          prop=\"description\">\n          <el-input\n            v-model=\"form.description\"\n            :placeholder=\"$t('如项目类型、项目功能、项目面积、完成日期等')\"\n            :rows=\"7\"\n            type=\"textarea\"/>\n        </el-form-item>\n        <el-form-item\n          :label=\"$t('相关照片')\"\n          prop=\"photo_urls\">\n          <my-multi-upload\n            ref=\"upload\"\n            :limit=\"20\"\n            :image-urls=\"form.photo_urls\"\n            type=\"work_photo\" />\n        </el-form-item>\n        <el-form-item\n          :label=\"$t('可见范围')\"\n          prop=\"visible_range\">\n          <el-radio-group v-model=\"form.visible_range\">\n            <el-radio label=\"public\">{{ $t(`公开可见`) }}</el-radio>\n            <el-radio label=\"private\">{{ $t(`私密`) }}</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n    </div>\n    <el-button\n      :loading=\"submitting\"\n      class=\"block w-100 shadow mt-24\"\n      type=\"primary\"\n      @click=\"onSubmit\">{{ $t('提交') }}</el-button>\n  </div>\n</template>\n\n<script>\nimport { getWorkById, addWork, updateWorkById } from '@/api/work'\nexport default {\n  data () {\n    return {\n      form: {\n        title: '',\n        description: '',\n        photo_urls: [],\n        visible_range: 'public'\n      },\n      rules: {\n        title: { required: true, message: this.$t('请填写此项') },\n        description: { required: true, message: this.$t('请填写此项'), whitespace: true },\n        photo_urls: { type: 'array', required: true, message: this.$t('请填写此项') },\n        visible_range: { required: true, mes9sage: this.$t('请填写此项') }\n      },\n      submitting: false,\n      loading: false\n    }\n  },\n  computed: {\n    editing () {\n      return this.$route.path !== '/work/add'\n    },\n    id () {\n      return this.$route.params.id\n    }\n  },\n  created () {\n    if (this.editing) {\n      this.loading = true\n      getWorkById(this.id).then(({ data }) => {\n        this.loading = false\n        this.form = {\n          title: data.title,\n          description: data.description,\n          photo_urls: data.photo_urls,\n          visible_range: data.visible_range\n        }\n      }).catch(() => {\n        this.loading = false\n      })\n    }\n  },\n  beforeDestroy () {\n    this.$refs.upload.clear() // 取消所有上传请求\n  },\n  methods: {\n    onSubmit () {\n      let photo_urls = this.$refs.upload.getImageUrls()\n      if (photo_urls === false) {\n        return this.$message.warning(this.$t('图片正在上传中，请稍候'))\n      }\n      this.form.photo_urls = photo_urls\n      this.$refs.form.validate().then(() => {\n        this.submitting = true\n        if (this.editing) {\n          updateWorkById(this.id, this.form).then(() => {\n            this.submitting = false\n            this.$router.push('/work/result?edit=1')\n          }).catch(() => {\n            this.submitting = false\n          })\n        } else {\n          addWork(this.form).then(() => {\n            this.submitting = false\n            this.$router.push('/work/result')\n          }).catch(() => {\n            this.submitting = false\n          })\n        }\n      }).catch(() => {})\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.form-card {\n  padding: 0 32px 16px;\n}\n.form {\n  width: 800px;\n  position: relative;\n  left: 50%;\n  margin-left: -400px;\n  padding-top: 32px;\n  /deep/ .el-input__inner,\n  /deep/ .el-textarea__inner {\n    border-color: rgb(220, 223, 230);\n    &:focus {\n      border-color: #0077b5;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/work/Add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-container\"},[_c('div',{staticClass:\"card form-card\"},[_c('div',{staticClass:\"border-bottom center p-24\"},[_c('h1',{directives:[{name:\"t\",rawName:\"v-t\",value:(_vm.editing ? '编辑作品' : '添加作品'),expression:\"editing ? '编辑作品' : '添加作品'\"}],staticClass:\"m0 color-primary\"}),_vm._v(\" \"),_c('p',{directives:[{name:\"t\",rawName:\"v-t\",value:('分享你的设计心得，展示你的专业能力'),expression:\"'分享你的设计心得，展示你的专业能力'\"}],staticClass:\"m0 pt1 black-65 f-13\"})]),_vm._v(\" \"),_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"form\",staticClass:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-position\":\"top\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('标题'),\"prop\":\"title\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('最多200字'),\"maxlength\":\"200\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('描述'),\"prop\":\"description\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('如项目类型、项目功能、项目面积、完成日期等'),\"rows\":7,\"type\":\"textarea\"},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('相关照片'),\"prop\":\"photo_urls\"}},[_c('my-multi-upload',{ref:\"upload\",attrs:{\"limit\":20,\"image-urls\":_vm.form.photo_urls,\"type\":\"work_photo\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('可见范围'),\"prop\":\"visible_range\"}},[_c('el-radio-group',{model:{value:(_vm.form.visible_range),callback:function ($$v) {_vm.$set(_vm.form, \"visible_range\", $$v)},expression:\"form.visible_range\"}},[_c('el-radio',{attrs:{\"label\":\"public\"}},[_vm._v(_vm._s(_vm.$t(\"公开可见\")))]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"private\"}},[_vm._v(_vm._s(_vm.$t(\"私密\")))])],1)],1)],1)],1),_vm._v(\" \"),_c('el-button',{staticClass:\"block w-100 shadow mt-24\",attrs:{\"loading\":_vm.submitting,\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(_vm._s(_vm.$t('提交')))])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9676904e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/work/Add.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9676904e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Add.vue\")\n}\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9676904e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9676904e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* customBlocks */\nvar customBlock = require(\"!!@kazupon/vue-i18n-loader!../../../node_modules/vue-loader/lib/selector?type=customBlocks&index=0!./Add.vue\")\nif (customBlock && customBlock.__esModule) {\n  customBlock = customBlock.default\n}\nif (typeof customBlock === \"function\") {\n  customBlock(Component)\n}\n\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/work/Add.vue\n// module id = null\n// module chunks = ","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"添加作品\":\"Add your work\",\"编辑作品\":\"Edit work\",\"分享你的设计心得，展示你的专业能力\":\"Share your design experience and showcase your professional skills\",\"标题\":\"Title\",\"最多200字\":\"200 characters at most\",\"描述\":\"Description\",\"如项目类型、项目功能、项目面积、完成日期等\":\"Such as project type, project function, project area, completion date, etc.\",\"相关照片\":\"Relevant photos\",\"可见范围\":\"Visible range\",\"公开可见\":\"Public\",\"私密\":\"Private\",\"提交\":\"Submit\",\"请填写此项\":\"Please enter this field\",\"图片正在上传中，请稍候\":\"Photo is uploading, please wait\"}}')\n  delete Component.options._Ctor\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@kazupon/vue-i18n-loader/lib!./node_modules/vue-loader/lib/selector.js?type=customBlocks&index=0!./src/views/work/Add.vue\n// module id = nwpF\n// module chunks = 21"],"sourceRoot":""}