{"version":3,"sources":["webpack:///src/views/login/ResetPassword.vue","webpack:///./src/views/login/ResetPassword.vue?90b5","webpack:///./src/views/login/ResetPassword.vue","webpack:///./src/views/login/ResetPassword.vue?72b6"],"names":["ResetPassword","data","_this","this","form","code","identifier","password","type","rules","validator","rule","value","callback","Object","validate","$t","trigger","required","len","message","min","max","loading","sending","count","timer","computed","sendButtonText","methods","onSend","_this2","$refs","validateField","$message","warning","_form","user","then","countDown","catch","onSubmit","_this3","valid","_form2","phone","email","success","$router","push","path","replace","_this4","setTimeout","clearTimeout","login_ResetPassword","render","_vm","_h","$createElement","_c","_self","staticClass","directives","name","rawName","expression","_v","ref","attrs","model","size","label","prop","$$v","$set","_s","slot","disabled","on","click","staticRenderFns","__vue_styles__","context","__webpack_require__","Component","component_normalizer","customBlock","__esModule","default","__webpack_exports__","module","exports","options","__i18n","_Ctor"],"mappings":"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","file":"static/js/31.d04922af06196dd7152d.js","sourcesContent":["<i18n>\n{\n  \"zh\": {\n    \"countdown\": \"重新获取验证码({count})\"\n  },\n  \"en\": {\n    \"重置密码\": \"Reset Password\",\n    \"手机号 / 邮箱\": \"Phone Number / Email\",\n    \"用户类型\": \"User type\",\n    \"设计师\": \"Designer\",\n    \"甲方\": \"Party\",\n    \"获取验证码\": \"Send verification code\",\n    \"验证码\": \"Verification code\",\n    \"新密码\": \"New password\",\n    \"确 定\": \"Submit\",\n    \"请输入合法手机号或邮箱\": \"Please enter a valid phone number or email\",\n    \"请输入6位验证码\": \"Please enter 6 characters verification code\",\n    \"请输入原密码\": \"Please enter the original password\",\n    \"密码长度为 6 到 25 个字符\": \"Password length is 6 to 25 characters\",\n    \"重置密码成功\": \"Successfully reset password\",\n    \"请选择用户类型\": \"Please select user type\",\n    \"countdown\": \"Resend verification code ({count})\"\n  }\n}\n</i18n>\n\n<template>\n  <section class=\"container both-center\">\n    <h1 v-t=\"'重置密码'\" />\n    <el-form\n      ref=\"form\"\n      :rules=\"rules\"\n      :model=\"form\"\n      size=\"small\">\n      <el-form-item\n        :label=\"$t('用户类型')\"\n        prop=\"type\">\n        <el-radio-group v-model=\"form.type\">\n          <el-radio label=\"party\">{{ $t('甲方') }}</el-radio>\n          <el-radio label=\"designer\">{{ $t('设计师') }}</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item\n        :label=\"$t('手机号 / 邮箱')\"\n        prop=\"identifier\">\n        <el-input v-model=\"form.identifier\">\n          <el-button\n            slot=\"append\"\n            :loading=\"sending\"\n            :disabled=\"!!count\"\n            @click=\"onSend\">{{ sendButtonText }} </el-button>\n        </el-input>\n      </el-form-item>\n      <el-form-item\n        :label=\"$t('验证码')\"\n        prop=\"code\">\n        <el-input v-model=\"form.code\"/>\n      </el-form-item>\n      <el-form-item\n        :label=\"$t('新密码')\"\n        prop=\"password\">\n        <el-input\n          v-model=\"form.password\"\n          type=\"text\"/>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          :loading=\"loading\"\n          type=\"primary\"\n          @click=\"onSubmit\">{{ $t('确 定') }}</el-button>\n      </el-form-item>\n    </el-form>\n  </section>\n</template>\n\n<script>\nimport { validateEmail, validatePhone } from '@/utils/validate'\nimport { sendCode, sendEmailCode, resetPassword } from '@/api/user'\nexport default {\n  data () {\n    return {\n      form: {\n        code: '',\n        identifier: '',\n        password: '',\n        type: null\n      },\n      rules: {\n        identifier: {\n          validator: (rule, value, callback) => {\n            if (!validatePhone(value) && !validateEmail(value)) {\n              callback(this.$t('请输入合法手机号或邮箱'))\n            } else {\n              callback()\n            }\n          },\n          trigger: 'blur'\n        },\n        code: { required: true, len: 6, message: this.$t('请输入6位验证码'), trigger: 'blur' },\n        password: [\n          { required: true, trigger: 'blur', message: this.$t('请输入新密码') },\n          { min: 6, max: 25, trigger: 'blur', message: '密码长度为 6 到 25 个字符' }\n        ],\n        type: { required: true, message: this.$t('请选择用户类型') }\n      },\n      loading: false,\n      sending: false, // 是否正在发送验证码\n      count: 0, // 倒计时\n      timer: null // 计时器\n    }\n  },\n  computed: {\n    sendButtonText () {\n      const { count } = this\n      if (count) {\n        return this.$t('countdown', { count })\n      } else {\n        return this.$t('获取验证码')\n      }\n    }\n  },\n  methods: {\n    onSend () {\n      this.$refs.form.validateField('identifier', (message) => {\n        if (message) return\n        if (!this.form.type) return this.$message.warning(this.$t('请选择用户类型'))\n\n        this.sending = true\n        const { identifier, type } = this.form\n        const sendFn = validatePhone(identifier)\n          ? () => sendCode(identifier, type, 'resetPassword')\n          : () => sendEmailCode(identifier, 'resetPassword')\n\n        sendFn().then(() => {\n          this.sending = false\n          this.count = 60\n          this.countDown()\n        }).catch(() => {\n          this.sending = false\n        })\n      })\n    },\n    onSubmit () {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.loading = true\n\n          const { code, identifier, password, type } = this.form\n          let form = { code, password, type }\n          if (validatePhone(identifier)) {\n            form.phone = identifier\n          } else {\n            form.email = identifier\n          }\n\n          resetPassword(form).then(() => {\n            this.loading = false\n            this.$message.success(this.$t('重置密码成功'))\n            this.$router.push({\n              path: '/signin',\n              replace: true\n            })\n          }).catch(() => {\n            this.loading = false\n          })\n        }\n      })\n    },\n    countDown () {\n      if (this.count > 0) {\n        this.count--\n        this.timer = setTimeout(() => {\n          this.countDown()\n        }, 1000)\n      } else {\n        clearTimeout(this.timer)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  width: 400px;\n  padding: 30px;\n  background: #ffffff;\n  border: 1px solid #d0d3d6;\n  border-radius: 4px;\n}\nh1 {\n  margin: 0 0 24px 0;\n  color: #000;\n  text-align: center;\n  font-size: 24px;\n  font-weight: 400;\n}\n.el-button {\n  width: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/login/ResetPassword.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"container both-center\"},[_c('h1',{directives:[{name:\"t\",rawName:\"v-t\",value:('重置密码'),expression:\"'重置密码'\"}]}),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.form,\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('用户类型'),\"prop\":\"type\"}},[_c('el-radio-group',{model:{value:(_vm.form.type),callback:function ($$v) {_vm.$set(_vm.form, \"type\", $$v)},expression:\"form.type\"}},[_c('el-radio',{attrs:{\"label\":\"party\"}},[_vm._v(_vm._s(_vm.$t('甲方')))]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"designer\"}},[_vm._v(_vm._s(_vm.$t('设计师')))])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('手机号 / 邮箱'),\"prop\":\"identifier\"}},[_c('el-input',{model:{value:(_vm.form.identifier),callback:function ($$v) {_vm.$set(_vm.form, \"identifier\", $$v)},expression:\"form.identifier\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"loading\":_vm.sending,\"disabled\":!!_vm.count},on:{\"click\":_vm.onSend},slot:\"append\"},[_vm._v(_vm._s(_vm.sendButtonText)+\" \")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('验证码'),\"prop\":\"code\"}},[_c('el-input',{model:{value:(_vm.form.code),callback:function ($$v) {_vm.$set(_vm.form, \"code\", $$v)},expression:\"form.code\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('新密码'),\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(_vm._s(_vm.$t('确 定')))])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41883052\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/login/ResetPassword.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-41883052\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ResetPassword.vue\")\n}\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ResetPassword.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ResetPassword.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-41883052\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ResetPassword.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-41883052\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* customBlocks */\nvar customBlock = require(\"!!@kazupon/vue-i18n-loader!../../../node_modules/vue-loader/lib/selector?type=customBlocks&index=0!./ResetPassword.vue\")\nif (customBlock && customBlock.__esModule) {\n  customBlock = customBlock.default\n}\nif (typeof customBlock === \"function\") {\n  customBlock(Component)\n}\n\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/login/ResetPassword.vue\n// module id = null\n// module chunks = ","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"zh\":{\"countdown\":\"重新获取验证码({count})\"},\"en\":{\"重置密码\":\"Reset Password\",\"手机号 / 邮箱\":\"Phone Number / Email\",\"用户类型\":\"User type\",\"设计师\":\"Designer\",\"甲方\":\"Party\",\"获取验证码\":\"Send verification code\",\"验证码\":\"Verification code\",\"新密码\":\"New password\",\"确 定\":\"Submit\",\"请输入合法手机号或邮箱\":\"Please enter a valid phone number or email\",\"请输入6位验证码\":\"Please enter 6 characters verification code\",\"请输入原密码\":\"Please enter the original password\",\"密码长度为 6 到 25 个字符\":\"Password length is 6 to 25 characters\",\"重置密码成功\":\"Successfully reset password\",\"请选择用户类型\":\"Please select user type\",\"countdown\":\"Resend verification code ({count})\"}}')\n  delete Component.options._Ctor\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@kazupon/vue-i18n-loader/lib!./node_modules/vue-loader/lib/selector.js?type=customBlocks&index=0!./src/views/login/ResetPassword.vue\n// module id = RxQI\n// module chunks = 31"],"sourceRoot":""}