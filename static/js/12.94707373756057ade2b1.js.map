{"version":3,"sources":["webpack:///./src/views/square/components/WorkList.vue?4cf8","webpack:///src/views/square/components/WorkList.vue","webpack:///./src/views/square/components/WorkList.vue?8bba","webpack:///./src/views/square/components/WorkList.vue","webpack:///src/views/square/index.vue","webpack:///./src/views/square/index.vue?0ef6","webpack:///./src/views/square/index.vue","webpack:///./src/views/square/index.vue?5c20"],"names":["module","exports","Component","options","__i18n","push","_Ctor","WorkList","data","works","currentPage","loading","nomore","error","followLoadings","computed","busy","this","methods","likeCountStr","count","$t","onToggleLike","index","work","liked","api_work","id","then","_ref","like_count","onReachBottom","_this","Object","_ref2","pagination","meta","apply","current_page","total_pages","catch","onReload","onFollow","_this2","$set","user","console","log","$store","dispatch","forEach","_ref3","v","following","follower_count","onUnfollow","_this3","_ref4","onEdit","$router","onDelete","_this4","$confirm","confirmButtonText","cancelButtonText","type","splice","$message","success","onPreview","urls","$refs","preview","open","splittedFollowerCount","utils","components_WorkList","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","infinite-scroll-disabled","infinite-scroll-distance","tag","_l","key","staticClass","to","avatar-url","avatar_url","_v","_s","created_at","$uid","trigger","icon","slot","nativeOn","click","$event","on","command","plain","round","size","autoplay","photo","photo_urls","src","domProps","textContent","title","description","class","is-liked","btn-text","on-reload","_e","ref","staticRenderFns","__vue_styles__","context","__webpack_require__","component_normalizer","customBlock","__esModule","default","square_components_WorkList","square","components","ActivityList","$route","query","getActivities","page","activity","onNavigate","path","views_square","tab-click","label","get-activities","show-action-button","square___vue_styles__","square_Component","square_customBlock","__webpack_exports__"],"mappings":"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","file":"static/js/12.94707373756057ade2b1.js","sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"加载更多\":\"Load more\",\"编辑\":\"Edit\",\"删除\":\"Delete\",\"确认删除该作品？\":\"Is it confirmed to delete the work?\"}}')\n  delete Component.options._Ctor\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@kazupon/vue-i18n-loader/lib!./node_modules/vue-loader/lib/selector.js?type=customBlocks&index=0!./src/views/square/components/WorkList.vue\n// module id = LC+d\n// module chunks = 12","<i18n>\n{\n  \"en\": {\n    \"加载更多\": \"Load more\",\n    \"编辑\": \"Edit\",\n    \"删除\": \"Delete\",\n    \"确认删除该作品？\": \"Is it confirmed to delete the work?\"\n  }\n}\n</i18n>\n\n<template>\n  <div\n    v-infinite-scroll=\"onReachBottom\"\n    infinite-scroll-disabled=\"busy\"\n    infinite-scroll-distance=\"200\">\n    <transition-group\n      tag=\"div\"\n      name=\"fade-transform-y\">\n      <div\n        v-for=\"(work, index) in works\"\n        :key=\"work.id\"\n        class=\"work-card\">\n        <div class=\"work-card__header\">\n          <router-link :to=\"'/profile?uid=' + work.user.id\">\n            <my-avatar\n              :avatar-url=\"work.user.avatar_url\"\n              class=\"work-card__header-avatar\"/>\n          </router-link>\n          <div class=\"work-card__header-text\">\n            <router-link :to=\"'/profile?uid=' + work.user.id\">\n              <p class=\"m0 f-15 bold black inline-block\">{{ work.user.name }}</p>\n            </router-link>\n            <p class=\"m0 f-13 bold black-65\">{{ splittedFollowerCount(work.user.follower_count) +' '+$t('g.follower') }}</p>\n            <p class=\"m0 f-13 bold black-65\">{{ $t('g.published_at') + ' ' + work.created_at }}</p>\n          </div>\n          <el-dropdown\n            v-if=\"$uid() == work.user.id\"\n            trigger=\"click\">\n            <el-button\n              type=\"text\"\n              class=\"work-card__header-dropdown\"\n              icon=\"el-icon-arrow-down\"/>\n            <el-dropdown-menu\n              slot=\"dropdown\">\n              <el-dropdown-item @click.native=\"onEdit(index)\">{{ $t('编辑') }}</el-dropdown-item>\n              <el-dropdown-item @click.native=\"onDelete(index)\">{{ $t('删除') }}</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n          <el-dropdown\n            v-else-if=\"work.user.following\"\n            trigger=\"click\"\n            @command=\"onUnfollow\">\n            <el-button\n              type=\"text\"\n              class=\"work-card__header-dropdown\"\n              icon=\"el-icon-arrow-down\"/>\n            <el-dropdown-menu\n              slot=\"dropdown\">\n              <el-dropdown-item :command=\"index\">{{ $t('g.cancelFollow') }}</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n          <el-button\n            v-else\n            :loading=\"followLoadings[index]\"\n            plain\n            round\n            type=\"primary\"\n            class=\"work-card__header-follow-button\"\n            size=\"small\"\n            @click=\"onFollow(index)\">{{ $t('g.follow') }}</el-button>\n        </div>\n        <div class=\"work-card__content\">\n          <el-carousel\n            :autoplay=\"false\"\n            class=\"work-card__content-carousel\"\n            trigger=\"click\">\n            <el-carousel-item\n              v-for=\"(photo, index) in work.photo_urls\"\n              :key=\"photo\"\n              @click.native=\"onPreview(work.photo_urls, index)\">\n              <img\n                :src=\"photo\"\n                class=\"work-card__content-carousel-item\">\n            </el-carousel-item>\n          </el-carousel>\n          <div class=\"work-card__content-info\">\n            <p\n              class=\"work-card__content-info-title\"\n              v-text=\"work.title\" />\n            <p\n              class=\"work-card__content-info-description\"\n              v-text=\"work.description\" />\n          </div>\n        </div>\n        <div class=\"work-card__action-btn\">\n          <el-button\n            :class=\"{'is-liked': work.liked}\"\n            type=\"text\"\n            @click=\"onToggleLike(index)\">{{ likeCountStr(work.like_count) }}</el-button>\n        </div>\n      </div>\n    </transition-group>\n    <my-loader\n      :loading=\"loading\"\n      :error=\"error\"\n      :btn-text=\"$t('加载更多')\"\n      :on-reload=\"onReload\" />\n    <p\n      v-t=\"$t('g.nomore')\"\n      v-if=\"nomore\"\n      class=\"no-more\"/>\n    <my-multi-preview ref=\"preview\"/>\n  </div>\n</template>\n\n<script>\nimport { getWorks, deleteWorkById, likeWorkById, unlikeWorkById } from '@/api/work'\nimport { splitNumber } from '@/utils'\nexport default {\n  data () {\n    return {\n      works: [],\n      currentPage: 0,\n      loading: false,\n      nomore: false,\n      error: false, // 标记上次加载是不是出错了，防止网络错误加载失败时不停地触发事件\n      followLoadings: {}\n    }\n  },\n  computed: {\n    busy () {\n      return this.loading || this.nomore || this.error\n    }\n  },\n  methods: {\n    likeCountStr (count) {\n      return count ? `${this.$t('g.like')} (${count})` : this.$t('g.like')\n    },\n    onToggleLike (index) {\n      const work = this.works[index]\n      const liked = work.liked\n      const fn = liked ? unlikeWorkById : likeWorkById\n      fn(work.id).then(({ data: { like_count } }) => {\n        work.liked = !liked\n        work.like_count = like_count\n      })\n    },\n    onReachBottom () {\n      this.loading = true\n      return getWorks(this.currentPage + 1).then(({ data }) => {\n        let { data: works, meta: { pagination } } = data\n        this.loading = false\n        this.works.push.apply(this.works, works)\n        this.currentPage = pagination.current_page\n        this.nomore = pagination.total_pages <= pagination.current_page\n      }).catch(() => {\n        this.error = true\n        this.loading = false\n      })\n    },\n    onReload () {\n      this.error = false\n    },\n    onFollow (index) {\n      if (this.followLoadings[index]) return\n      this.$set(this.followLoadings, index, true)\n      let user = this.works[index].user\n      console.log('user', user)\n      this.$store.dispatch('FOLLOW', user.id).then(() => {\n        this.followLoadings[index] = false\n        this.works.forEach(({ user: v }) => {\n          if (v.id === user.id) {\n            v.following = true\n            v.follower_count++\n          }\n        })\n      }).catch(() => {\n        this.followLoadings[index] = false\n      })\n    },\n    onUnfollow (index) {\n      let user = this.works[index].user\n      this.$store.dispatch('UNFOLLOW', user.id).then(() => {\n        this.works.forEach(({ user: v }) => {\n          if (v.id === user.id) {\n            v.following = false\n            v.follower_count--\n          }\n        })\n      })\n    },\n    onEdit (index) {\n      const { id } = this.works[index]\n      this.$router.push(`/work/${id}/edit`)\n    },\n    onDelete (index) {\n      this.$confirm(this.$t('确认删除该作品？'), this.$t('g.notice'), {\n        confirmButtonText: this.$t('g.confirmBtn'),\n        cancelButtonText: this.$t('g.cancelBtn'),\n        type: 'warning'\n      }).then(() => {\n        deleteWorkById(this.works[index].id).then(() => {\n          this.works.splice(index, 1)\n          this.$message.success(this.$t('g.successfullyDeleted'))\n        })\n      }).catch(() => {})\n    },\n    onPreview (urls, index) {\n      this.$refs.preview.open(urls, index)\n    },\n    splittedFollowerCount (count) {\n      return splitNumber(count)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.work-card {\n  padding: 16px 16px 0;\n  margin-bottom: 16px;\n  box-shadow: none;\n  border: 1px solid rgba($color: #000000, $alpha: 0.1);\n  &__header {\n    display: flex;\n    align-items: flex-start;\n    &-avatar {\n      width: 48px;\n      height: 48px;\n    }\n    &-text {\n      flex: 1;\n      margin-left: 8px;\n    }\n    &-dropdown {\n      padding-top: 0;\n      color: rgba(0, 0, 0, 0.65);\n    }\n  }\n  &__content {\n    display: flex;\n    align-items: flex-start;\n    margin-top: 8px;\n    &-carousel {\n      flex: 1;\n      &-item {\n        width: 100%;\n        cursor: pointer;\n      }\n    }\n    &-info {\n      width: 200px;\n      padding: 0 16px;\n      &-title {\n        margin: 0 0 12px;\n        font-size: 16px;\n        font-weight: bold;\n        color: rgba(0, 0, 0, 0.85);\n      }\n      &-description {\n        margin: 0;\n        font-size: 14px;\n        line-height: 1.71em;\n        white-space: pre-wrap;\n        word-wrap: break-word;\n        color: rgba(0, 0, 0, 0.85);\n      }\n    }\n  }\n  &__action-btn .el-button {\n    color: rgba(0, 0, 0, 0.65);\n    &.is-liked {\n      color: #0077b5;\n    }\n    &:hover {\n      color: #3392c4;\n    }\n  }\n}\n.no-more {\n  margin: 16px 0 0;\n  text-align: center;\n  font-size: 11px;\n  color: rgba(0, 0, 0, 0.45);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/square/components/WorkList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.onReachBottom),expression:\"onReachBottom\"}],attrs:{\"infinite-scroll-disabled\":\"busy\",\"infinite-scroll-distance\":\"200\"}},[_c('transition-group',{attrs:{\"tag\":\"div\",\"name\":\"fade-transform-y\"}},_vm._l((_vm.works),function(work,index){return _c('div',{key:work.id,staticClass:\"work-card\"},[_c('div',{staticClass:\"work-card__header\"},[_c('router-link',{attrs:{\"to\":'/profile?uid=' + work.user.id}},[_c('my-avatar',{staticClass:\"work-card__header-avatar\",attrs:{\"avatar-url\":work.user.avatar_url}})],1),_vm._v(\" \"),_c('div',{staticClass:\"work-card__header-text\"},[_c('router-link',{attrs:{\"to\":'/profile?uid=' + work.user.id}},[_c('p',{staticClass:\"m0 f-15 bold black inline-block\"},[_vm._v(_vm._s(work.user.name))])]),_vm._v(\" \"),_c('p',{staticClass:\"m0 f-13 bold black-65\"},[_vm._v(_vm._s(_vm.splittedFollowerCount(work.user.follower_count) +' '+_vm.$t('g.follower')))]),_vm._v(\" \"),_c('p',{staticClass:\"m0 f-13 bold black-65\"},[_vm._v(_vm._s(_vm.$t('g.published_at') + ' ' + work.created_at))])],1),_vm._v(\" \"),(_vm.$uid() == work.user.id)?_c('el-dropdown',{attrs:{\"trigger\":\"click\"}},[_c('el-button',{staticClass:\"work-card__header-dropdown\",attrs:{\"type\":\"text\",\"icon\":\"el-icon-arrow-down\"}}),_vm._v(\" \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{nativeOn:{\"click\":function($event){_vm.onEdit(index)}}},[_vm._v(_vm._s(_vm.$t('编辑')))]),_vm._v(\" \"),_c('el-dropdown-item',{nativeOn:{\"click\":function($event){_vm.onDelete(index)}}},[_vm._v(_vm._s(_vm.$t('删除')))])],1)],1):(work.user.following)?_c('el-dropdown',{attrs:{\"trigger\":\"click\"},on:{\"command\":_vm.onUnfollow}},[_c('el-button',{staticClass:\"work-card__header-dropdown\",attrs:{\"type\":\"text\",\"icon\":\"el-icon-arrow-down\"}}),_vm._v(\" \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":index}},[_vm._v(_vm._s(_vm.$t('g.cancelFollow')))])],1)],1):_c('el-button',{staticClass:\"work-card__header-follow-button\",attrs:{\"loading\":_vm.followLoadings[index],\"plain\":\"\",\"round\":\"\",\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.onFollow(index)}}},[_vm._v(_vm._s(_vm.$t('g.follow')))])],1),_vm._v(\" \"),_c('div',{staticClass:\"work-card__content\"},[_c('el-carousel',{staticClass:\"work-card__content-carousel\",attrs:{\"autoplay\":false,\"trigger\":\"click\"}},_vm._l((work.photo_urls),function(photo,index){return _c('el-carousel-item',{key:photo,nativeOn:{\"click\":function($event){_vm.onPreview(work.photo_urls, index)}}},[_c('img',{staticClass:\"work-card__content-carousel-item\",attrs:{\"src\":photo}})])})),_vm._v(\" \"),_c('div',{staticClass:\"work-card__content-info\"},[_c('p',{staticClass:\"work-card__content-info-title\",domProps:{\"textContent\":_vm._s(work.title)}}),_vm._v(\" \"),_c('p',{staticClass:\"work-card__content-info-description\",domProps:{\"textContent\":_vm._s(work.description)}})])],1),_vm._v(\" \"),_c('div',{staticClass:\"work-card__action-btn\"},[_c('el-button',{class:{'is-liked': work.liked},attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.onToggleLike(index)}}},[_vm._v(_vm._s(_vm.likeCountStr(work.like_count)))])],1)])})),_vm._v(\" \"),_c('my-loader',{attrs:{\"loading\":_vm.loading,\"error\":_vm.error,\"btn-text\":_vm.$t('加载更多'),\"on-reload\":_vm.onReload}}),_vm._v(\" \"),(_vm.nomore)?_c('p',{directives:[{name:\"t\",rawName:\"v-t\",value:(_vm.$t('g.nomore')),expression:\"$t('g.nomore')\"}],staticClass:\"no-more\"}):_vm._e(),_vm._v(\" \"),_c('my-multi-preview',{ref:\"preview\"})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5372dbcb\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/square/components/WorkList.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5372dbcb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./WorkList.vue\")\n}\nimport normalizeComponent from \"!../../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./WorkList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./WorkList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5372dbcb\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./WorkList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5372dbcb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* customBlocks */\nvar customBlock = require(\"!!@kazupon/vue-i18n-loader!../../../../node_modules/vue-loader/lib/selector?type=customBlocks&index=0!./WorkList.vue\")\nif (customBlock && customBlock.__esModule) {\n  customBlock = customBlock.default\n}\nif (typeof customBlock === \"function\") {\n  customBlock(Component)\n}\n\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/square/components/WorkList.vue\n// module id = null\n// module chunks = ","<i18n>\n{\n  \"zh\": {\n    \"tip1\": \"设计师广场包含设计师们近一个月的热门动态（依据点赞数与评论数排列）与作品集。\"\n  },\n  \"en\": {\n    \"tip1\": \"Designer Square contains the trending activities of designers for nearly a month (according to the number of likes and comments) and their works.\",\n    \"设计师广场\": \"Designer Plaza\",\n    \"亚里士多德\": \"Aristotle\",\n    \"热门动态\": \"Trending activities\",\n    \"欣赏作品\": \"Appreciate works\",\n    \"想要更精确地查找设计师？\": \"Want to find a designer more accurately?\",\n    \"试试这个搜索页\": \"Try this search\"\n  }\n}\n</i18n>\n<template>\n  <div>\n    <div class=\"banner\">\n      <h1\n        v-t=\"'设计师广场'\"\n        class=\"banner__title\" />\n      <div class=\"banner__sub\">\n        <p v-text=\"'人们为了生活来到城市，为了更好的生活而留在城市。'\" />\n        <p v-text=\"'Men come to city to live, they stay in the city to live well.'\" />\n        <p\n          class=\"right-align\"\n          v-text=\"'——' + $t('亚里士多德')\" />\n      </div>\n    </div>\n    <div class=\"wrap-container\">\n      <div class=\"main-container\">\n        <div class=\"left-container\">\n          <el-tabs\n            :value=\"type\"\n            type=\"card\"\n            @tab-click=\"onNavigate\">\n            <el-tab-pane\n              :label=\"$t('热门动态')\"\n              name=\"activity\"/>\n            <el-tab-pane\n              :label=\"$t('欣赏作品')\"\n              name=\"work\"/>\n          </el-tabs>\n          <activity-list\n            v-if=\"type === 'activity'\"\n            :get-activities=\"getActivities\"\n            show-action-button\n            class=\"activity-list\"/>\n          <work-list v-else />\n        </div>\n        <div class=\"right-container\">\n          <div\n            v-t=\"'tip1'\"\n            class=\"tip\" />\n          <div class=\"tip\">\n            {{ $t('想要更精确地查找设计师？') }}\n            <router-link to=\"/search?type=designer\">{{ $t('试试这个搜索页') }}</router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ActivityList from '@/views/components/ActivityList'\nimport WorkList from './components/WorkList'\nimport { getTrendingActitivies } from '@/api/activity'\nexport default {\n  components: { ActivityList, WorkList },\n  computed: {\n    type () {\n      return this.$route.query.type || 'activity'\n    }\n  },\n  methods: {\n    getActivities (page) {\n      return getTrendingActitivies(page)\n    },\n    onNavigate ({ name }) {\n      this.$router.push({\n        path: this.$route.path,\n        query: {\n          type: name\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.banner {\n  padding: 40px 0;\n  line-height: 1.5;\n  &__title {\n    margin: 0;\n    font-size: 40px;\n    font-weight: 300;\n    text-align: center;\n    color: rgba(0, 0, 0, 0.85);\n  }\n  &__sub {\n    margin: 0 auto 10px;\n    width: 430px;\n    font-size: 16px;\n    color: rgba(0, 0, 0, 0.65);\n    > p {\n      margin: 0;\n    }\n  }\n}\n.wrap-container {\n  min-height: calc(100vh - 52px);\n  background-color: #fff;\n  border-top: 1px solid rgba($color: #000000, $alpha: 0.1);\n  .main-container {\n    padding: 40px 0;\n    &::after {\n      display: table;\n      content: \"\";\n      clear: both;\n    }\n    .left-container {\n      float: left;\n      width: 75%;\n    }\n    .right-container {\n      float: right;\n      width: 25%;\n      padding-left: 24px;\n      padding-top: 56px;\n    }\n  }\n}\n.activity-list /deep/ .activity-card {\n  margin-bottom: 16px;\n  box-shadow: none;\n  border: 1px solid rgba($color: #000000, $alpha: 0.1);\n  /deep/ .reply-input-area {\n    border-left: none;\n    border-right: none;\n  }\n}\n.tip {\n  padding: 8px 10px;\n  margin-bottom: 16px;\n  font-size: 14px;\n  color: #444d56;\n  line-height: 1.5;\n  border: solid 1px rgba($color: #000000, $alpha: 0.1);\n  border-radius: 3px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/square/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"banner\"},[_c('h1',{directives:[{name:\"t\",rawName:\"v-t\",value:('设计师广场'),expression:\"'设计师广场'\"}],staticClass:\"banner__title\"}),_vm._v(\" \"),_c('div',{staticClass:\"banner__sub\"},[_c('p',{domProps:{\"textContent\":_vm._s('人们为了生活来到城市，为了更好的生活而留在城市。')}}),_vm._v(\" \"),_c('p',{domProps:{\"textContent\":_vm._s('Men come to city to live, they stay in the city to live well.')}}),_vm._v(\" \"),_c('p',{staticClass:\"right-align\",domProps:{\"textContent\":_vm._s('——' + _vm.$t('亚里士多德'))}})])]),_vm._v(\" \"),_c('div',{staticClass:\"wrap-container\"},[_c('div',{staticClass:\"main-container\"},[_c('div',{staticClass:\"left-container\"},[_c('el-tabs',{attrs:{\"value\":_vm.type,\"type\":\"card\"},on:{\"tab-click\":_vm.onNavigate}},[_c('el-tab-pane',{attrs:{\"label\":_vm.$t('热门动态'),\"name\":\"activity\"}}),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":_vm.$t('欣赏作品'),\"name\":\"work\"}})],1),_vm._v(\" \"),(_vm.type === 'activity')?_c('activity-list',{staticClass:\"activity-list\",attrs:{\"get-activities\":_vm.getActivities,\"show-action-button\":\"\"}}):_c('work-list')],1),_vm._v(\" \"),_c('div',{staticClass:\"right-container\"},[_c('div',{directives:[{name:\"t\",rawName:\"v-t\",value:('tip1'),expression:\"'tip1'\"}],staticClass:\"tip\"}),_vm._v(\" \"),_c('div',{staticClass:\"tip\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('想要更精确地查找设计师？'))+\"\\n          \"),_c('router-link',{attrs:{\"to\":\"/search?type=designer\"}},[_vm._v(_vm._s(_vm.$t('试试这个搜索页')))])],1)])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-12a0deae\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/square/index.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-12a0deae\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-12a0deae\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-12a0deae\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* customBlocks */\nvar customBlock = require(\"!!@kazupon/vue-i18n-loader!../../../node_modules/vue-loader/lib/selector?type=customBlocks&index=0!./index.vue\")\nif (customBlock && customBlock.__esModule) {\n  customBlock = customBlock.default\n}\nif (typeof customBlock === \"function\") {\n  customBlock(Component)\n}\n\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/square/index.vue\n// module id = null\n// module chunks = ","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"zh\":{\"tip1\":\"设计师广场包含设计师们近一个月的热门动态（依据点赞数与评论数排列）与作品集。\"},\"en\":{\"tip1\":\"Designer Square contains the trending activities of designers for nearly a month (according to the number of likes and comments) and their works.\",\"设计师广场\":\"Designer Plaza\",\"亚里士多德\":\"Aristotle\",\"热门动态\":\"Trending activities\",\"欣赏作品\":\"Appreciate works\",\"想要更精确地查找设计师？\":\"Want to find a designer more accurately?\",\"试试这个搜索页\":\"Try this search\"}}')\n  delete Component.options._Ctor\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@kazupon/vue-i18n-loader/lib!./node_modules/vue-loader/lib/selector.js?type=customBlocks&index=0!./src/views/square/index.vue\n// module id = oRmW\n// module chunks = 12"],"sourceRoot":""}