webpackJsonp([12],{Me74:function(t,e,n){"use strict";var i=n("XyMi"),r={props:{user:{type:Object,default:function(){return{}}},content:{type:String,default:""}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-list-item"},[n("router-link",{attrs:{to:"/profile?uid="+t.user.id}},[n("my-avatar",{staticClass:"user-list-item__avatar",attrs:{"avatar-url":t.user.avatar_url}})],1),t._v(" "),n("div",{staticClass:"user-list-item__info"},[n("router-link",{staticClass:"bold black-85",attrs:{to:"/profile?uid="+t.user.id}},[t._v(t._s(t.user.name))]),t._v(" "),n("p",[n("span",{staticClass:"color-primary"},[t._v(t._s(t.$t("关注")))]),t._v(" "),n("span",{domProps:{textContent:t._s(t.user.following_count)}}),t._v(" "),n("span",{staticClass:"color-primary"},[t._v(t._s(t.$t("粉丝")))]),t._v(" "),n("span",{domProps:{textContent:t._s(t.user.follower_count)}})]),t._v(" "),n("p",{staticClass:"user-list-item__info-title",domProps:{textContent:t._s(t.user.title)}}),t._v(" "),t._t("content",[n("p",{staticClass:"user-list-item__info-content",domProps:{textContent:t._s(t.content||t.user.introduction)}})])],2),t._v(" "),t._t("action")],2)},staticRenderFns:[]};var o=function(t){n("Xk3t")},a=Object(i.a)(r,s,!1,o,"data-v-228a4f03",null),u=n("woc8");u&&u.__esModule&&(u=u.default),"function"==typeof u&&u(a);e.a=a.exports},UDHK:function(t,e){},Xk3t:function(t,e){},bm7k:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"邀请用户评价":"Invite User to Review","确认邀请该用户发表评价？":"Is it confirmed to invite the user to write a review?","输入设计师姓名进行搜索":"Search by designer\'s name","搜索":"Search","邀请":"Invite","已邀请":"Invited","已评价":"Reviewed","重新加载":"Reload"}}'),delete t.options._Ctor}},w5pB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("XyMi"),r=n("Me74"),s=n("vMJZ"),o=n("ORdI"),a={components:{UserListItem:r.a},data:function(){return{users:[],keyword:"",pageCount:1,currentPage:1,loading:!1,error:!1,btnLoadings:{}}},created:function(){this.$route.query.p&&(this.currentPage=parseInt(this.$route.query.p)),this.$route.query.keyword&&(this.keyword=this.$route.query.keyword),this.getUsers()},methods:{getUsers:function(){var t=this;this.loading=!0,this.error=!1;var e=this.currentPage,n=this.keyword;Object(s.k)(e,n).then(function(e){var n=e.data,i=n.data,r=n.meta.pagination;t.loading=!1,t.users=i,t.pageCount=r.total_pages}).catch(function(){t.loading=!1,t.error=!0})},onInvite:function(t){var e=this;this.btnLoadings[t]||this.$confirm(this.$t("确认邀请该用户发表评价？"),this.$t("g.notice"),{confirmButtonText:this.$t("g.confirmBtn"),cancelButtonText:this.$t("g.cancelBtn"),type:"warning"}).then(function(){e.$set(e.btnLoadings,t,!0);var n=e.users[t];Object(o.e)(n.id).then(function(){n.review_status="inviting",e.btnLoadings[t]=!1}).catch(function(){e.btnLoadings[t]=!1})}).catch(function(){})},onSearch:function(){this.$router.push({path:this.$route.path,query:{keyword:this.keyword}})},onChangePage:function(t){this.$router.push({path:this.$route.path,query:{keyword:this.$route.query.keyword,p:t}})}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h2",{directives:[{name:"t",rawName:"v-t",value:"邀请用户评价",expression:"'邀请用户评价'"}],staticClass:"mt0"}),t._v(" "),n("el-input",{attrs:{placeholder:t.$t("输入设计师姓名进行搜索"),size:"small"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSearch(e):null}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[n("el-button",{attrs:{slot:"append",type:"primary"},on:{click:t.onSearch},slot:"append"},[t._v(t._s(t.$t("搜索")))])],1),t._v(" "),t.loading||t.error?n("my-loader",{attrs:{loading:t.loading,error:t.error,"btn-text":t.$t("重新加载"),"on-reload":t.getUsers}}):t.users.length?[n("div",{staticClass:"user-list"},t._l(t.users,function(e,i){return n("user-list-item",{key:e.id,attrs:{user:e}},[n("template",{slot:"action"},["inviting"===e.review_status?n("el-button",{attrs:{disabled:"",plain:"",size:"mini"}},[t._v(t._s(t.$t("已邀请")))]):"reviewed"===e.review_status?n("el-button",{attrs:{disabled:"",plain:"",size:"mini"}},[t._v(t._s(t.$t("已评价")))]):n("el-button",{attrs:{loading:t.btnLoadings[i],plain:"",type:"primary",size:"mini"},on:{click:function(e){t.onInvite(i)}}},[t._v(t._s(t.$t("邀请")))])],1)],2)})),t._v(" "),n("el-pagination",{staticClass:"mt2 center",attrs:{"current-page":t.currentPage,"page-count":t.pageCount,background:"",layout:"prev, pager, next"},on:{"update:currentPage":function(e){t.currentPage=e},"current-change":t.onChangePage}})]:n("my-empty"),t._v(" "),t.loading||t.error?t._e():n("my-invite-alert",{staticClass:"mt2"})],2)},staticRenderFns:[]};var c=function(t){n("UDHK")},l=Object(i.a)(a,u,!1,c,"data-v-2b8991e8",null),d=n("bm7k");d&&d.__esModule&&(d=d.default),"function"==typeof d&&d(l);e.default=l.exports},woc8:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"关注":"Following","粉丝":"Follower"}}'),delete t.options._Ctor}}});
//# sourceMappingURL=12.c74c05d670f3629faa3b.js.map