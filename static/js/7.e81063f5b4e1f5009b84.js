webpackJsonp([7],{"2VSF":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"个人资料":"Profile","编辑个人资料":"Edit profile","甲方评价":"Party Reviews","设计师评价":"Designer Reviews","收到的评价":"Received Reviews","个人动态":"Personal Activities","已关注":"Following","关注":"Follow","联系":"Contact","分享":"Share","浏览量":"Views","复制链接":"Copy the link","暂未收到评价":"No received reviews","查看所有评价":"View all reviews","所有评价":"All reviews","作品集":"Portfolios","拼命加载中":"Loading user info","发送站内信":"Send direct message","发 送":"Send","您可以评价该用户":"You can review the user","发表评价":"Post review","发送成功后，您可在消息列表中查看对话":"You can view the conversation in the message list once sent","发送成功":"Successfully sent message","消息不能为空":"Message cannot be empty","您无权查看该甲方的信息":"You are not authorized to view the information of the Party."}}'),delete e.options._Ctor}},"3c2h":function(e,t){},"9SJb":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh":{"following":"关注","follower":"粉丝","viewHomePage":"查看个人主页"},"en":{"following":"Following","follower":"Follower","viewHomePage":"View Home Page"}}'),delete e.options._Ctor}},DqdQ:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"收到的评价":"Received Reviews","暂未收到评价":"No received reviews","查看所有评价":"View all reviews"}}'),delete e.options._Ctor}},JJR2:function(e,t){},Vyr1:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"加载更多":"Load more","编辑":"Edit","删除":"Delete","确认删除该作品？":"Is it confirmed to delete the work?","上传作品集":"Upload new work"}}'),delete e.options._Ctor}},ksIG:function(e,t){},tFu8:function(e,t){},"w+O/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("XyMi"),o={props:{userInfo:{type:Object,default:function(){return{id:null,avatar_url:"",name:this.$t("g.loading"),title:"",introduction:"",following_num:0,follower_num:0}}}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("aside",{staticClass:"card profile-card"},[i("div",{staticClass:"profile-card__info"},[i("my-avatar",{staticClass:"profile-card__info-avatar",attrs:{"avatar-url":e.userInfo.avatar_url}}),e._v(" "),i("h1",{staticClass:"m0 mb1"},[e._v(e._s(e.userInfo.name))]),e._v(" "),i("p",{domProps:{textContent:e._s(e.userInfo.title)}}),e._v(" "),e.userInfo.type?i("p",{directives:[{name:"t",rawName:"v-t",value:e.$t("g."+e.userInfo.type),expression:"$t(`g.${userInfo.type}`)"}]}):e._e(),e._v(" "),i("p",{domProps:{textContent:e._s(e.userInfo.introduction)}})],1),e._v(" "),i("div",{staticClass:"profile-card__follow"},[i("div",{staticClass:"p-12"},[i("router-link",{staticClass:"f-20",attrs:{to:"/follow?uid="+e.userInfo.id}},[e._v(e._s(e.userInfo.following_count))]),e._v(" "),i("span",{staticClass:"block f-12 black-65"},[e._v(e._s(e.$t("following")))])],1),e._v(" "),"designer"===e.userInfo.type?[i("my-divider",{attrs:{margin:"12"}}),e._v(" "),i("div",{staticClass:"p-12"},[i("router-link",{staticClass:"f-20",attrs:{to:"/follow?type=follower&uid="+e.userInfo.id}},[e._v(e._s(e.userInfo.follower_count))]),e._v(" "),i("span",{staticClass:"block f-12 black-65"},[e._v(e._s(e.$t("follower")))])],1)]:e._e()],2),e._v(" "),i("div",{staticClass:"profile-card__action"},[e._t("default",[i("el-button",{attrs:{plain:""},on:{click:function(t){e.$router.push("/profile")}}},[e._v(e._s(e.$t("viewHomePage")))])])],2)])},staticRenderFns:[]};var a=function(e){i("JJR2")},r=Object(n.a)(o,s,!1,a,"data-v-15451d4a",null),l=i("9SJb");l&&l.__esModule&&(l=l.default),"function"==typeof l&&l(r);var c=r.exports,u=i("xoXj"),v=i("GUlH"),d={data:function(){return{works:[],currentPage:0,loading:!1,nomore:!1,error:!1}},computed:{busy:function(){return this.loading||this.nomore||this.error},pageUID:function(){return this.$route.query.uid||this.$uid()},isCurrentUser:function(){return this.pageUID==this.$uid()}},methods:{likeCountStr:function(e){return e?this.$t("g.like")+" ("+e+")":this.$t("g.like")},onToggleLike:function(e){var t=this.works[e],i=t.liked;(i?v.g:v.f)(t.id).then(function(e){var n=e.data.like_count;t.liked=!i,t.like_count=n})},onReachBottom:function(){var e=this;return this.loading=!0,Object(v.e)(this.pageUID,this.currentPage+1).then(function(t){var i=t.data,n=i.data,o=i.meta.pagination;e.loading=!1,e.works.push.apply(e.works,n),e.currentPage=o.current_page,e.nomore=o.total_pages<=o.current_page}).catch(function(){e.error=!0,e.loading=!1})},onReload:function(){this.error=!1},onPreview:function(e,t){this.$refs.preview.open(e,t)},onEdit:function(e){var t=this.works[e].id;this.$router.push("/work/"+t+"/edit")},onDelete:function(e){var t=this;this.$confirm(this.$t("确认删除该作品？"),this.$t("g.notice"),{confirmButtonText:this.$t("g.confirmBtn"),cancelButtonText:this.$t("g.cancelBtn"),type:"warning"}).then(function(){Object(v.b)(t.works[e].id).then(function(){t.works.splice(e,1),t.$message.success(t.$t("g.successfullyDeleted"))})}).catch(function(){})}}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.onReachBottom,expression:"onReachBottom"}],attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"200"}},[e.isCurrentUser?i("el-button",{staticClass:"block w-100",staticStyle:{"margin-bottom":"8px"},attrs:{type:"primary",plain:""},on:{click:function(t){e.$router.push("/work/add")}}},[e._v(e._s(e.$t("上传作品集")))]):e._e(),e._v(" "),i("transition-group",{attrs:{tag:"div",name:"fade-transform-y"}},e._l(e.works,function(t,n){return i("div",{key:t.id,staticClass:"card work-card"},[e.isCurrentUser?i("el-dropdown",{staticClass:"work-card__dropdown",attrs:{trigger:"click"}},[i("el-button",{attrs:{type:"text",icon:"el-icon-arrow-down"}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(t){e.onEdit(n)}}},[e._v(e._s(e.$t("编辑")))]),e._v(" "),i("el-dropdown-item",{nativeOn:{click:function(t){e.onDelete(n)}}},[e._v(e._s(e.$t("删除")))])],1)],1):e._e(),e._v(" "),i("el-carousel",{staticClass:"work-card__carousel",attrs:{autoplay:!1,trigger:"click"}},e._l(t.photo_urls,function(n,o){return i("el-carousel-item",{key:n,nativeOn:{click:function(i){e.onPreview(t.photo_urls,o)}}},[i("img",{staticClass:"work-card__carousel-item",attrs:{src:n}})])})),e._v(" "),i("div",{staticClass:"work-card__info"},[i("p",{staticClass:"work-card__info-title",domProps:{textContent:e._s(t.title)}}),e._v(" "),i("p",{staticClass:"work-card__info-description",domProps:{textContent:e._s(t.description)}}),e._v(" "),i("el-button",{staticClass:"work-card__info-like-btn",class:{"is-liked":t.liked},attrs:{type:"text"},on:{click:function(t){e.onToggleLike(n)}}},[e._v(e._s(e.likeCountStr(t.like_count)))])],1)],1)})),e._v(" "),i("my-loader",{attrs:{loading:e.loading,error:e.error,"btn-text":e.$t("加载更多"),"on-reload":e.onReload}}),e._v(" "),e.nomore?i("p",{directives:[{name:"t",rawName:"v-t",value:e.$t("g.nomore"),expression:"$t('g.nomore')"}],staticClass:"no-more"}):e._e(),e._v(" "),i("my-multi-preview",{ref:"preview"})],1)},staticRenderFns:[]};var f=function(e){i("3c2h")},p=Object(n.a)(d,g,!1,f,"data-v-3df1ea0c",null),_=i("Vyr1");_&&_.__esModule&&(_=_.default),"function"==typeof _&&_(p);var w=p.exports,m={props:{reviews:{type:Array,required:!0}}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card review-card"},[e._l(e.reviews,function(t,n){return n<5?i("div",{key:t.id,staticClass:"review-item"},[i("div",{staticClass:"review-item__user"},[i("router-link",{attrs:{to:"/profile?uid="+t.reviewer.id}},[i("my-avatar",{staticClass:"review-item__user-avatar",attrs:{"avatar-url":t.reviewer.avatar_url}})],1),e._v(" "),i("div",{staticClass:"review-item__user-info"},[i("router-link",{staticClass:"f-14 bold",attrs:{to:"/profile?uid="+t.reviewer.id}},[e._v(e._s(t.reviewer.name))]),e._v(" "),i("span",{directives:[{name:"t",rawName:"v-t",value:"g."+t.reviewer.type,expression:"`g.${review.reviewer.type}`"}],staticClass:"f-14 black-45"}),e._v(" "),i("p",{staticClass:"m0 f-12 black-45",domProps:{textContent:e._s(t.created_at)}})],1)],1),e._v(" "),i("p",{staticClass:"m0 mt-4 f-12 black-45",domProps:{textContent:e._s(t.content)}})]):e._e()}),e._v(" "),e.reviews.length?i("el-button",{staticClass:"center w-100",attrs:{type:"text"},on:{click:function(t){e.$emit("clickBtn")}}},[e._v(e._s(e.$t("查看所有评价"))+" ")]):e._e(),e._v(" "),e.reviews.length?e._e():i("p",{directives:[{name:"t",rawName:"v-t",value:e.$t("暂未收到评价"),expression:"$t('暂未收到评价')"}],staticClass:"m0 p-12 f-12 black-45 center"})],2)},staticRenderFns:[]};var k=function(e){i("tFu8")},C=Object(n.a)(m,h,!1,k,"data-v-adb0b724",null),b=i("DqdQ");b&&b.__esModule&&(b=b.default),"function"==typeof b&&b(C);var $=C.exports,y=i("vMJZ"),D=i("Ty/O"),x=i("ORdI"),I=i("+PoZ"),P={components:{ProfileCard:c,ActivityList:u.a,WorkList:w,ReviewList:$},data:function(){return{userInfo:{name:"加载中",following_count:0,follower_count:0},activities:[],reviews:[],reviewLoading:!0,followBtnLoading:!1,activitiesLoading:!0,activitiesNomore:!1,reviewDialog:{loading:!1,visible:!1,reviews:[],currentPage:1,pageCount:1},messageDialog:{visible:!1,input:"",loading:!1},pageType:"work"}},computed:{pageUID:function(){return this.$route.query.uid||this.$uid()},isDesigner:function(){return"designer"===this.userInfo.type},isCurrentUser:function(){return this.$uid()==this.pageUID}},created:function(){var e=this;if(this.isCurrentUser)this.userInfo=this.$store.getters.userInfo,Object(x.d)(this.pageUID).then(function(t){var i=t.data,n=i.data,o=i.meta.pagination;e.reviews=e.reviewDialog.reviews=n,e.reviewDialog.pageCount=o.total_pages,e.reviewLoading=!1}).catch(function(){e.reviewLoading=!1});else{var t=this.$loading({lock:!0,spinner:"el-icon-loading",text:this.$t("拼命加载中"),background:"rgba(255, 255, 255)"});Object(y.g)(this.pageUID).then(function(i){var n=i.data;e.userInfo=n,t.close(),Object(x.d)(e.pageUID).then(function(t){var i=t.data,n=i.data,o=i.meta.pagination;e.reviews=e.reviewDialog.reviews=n,e.reviewDialog.pageCount=o.total_pages,e.reviewLoading=!1}).catch(function(){e.reviewLoading=!1})}).catch(function(i){var n=i.response;t.close(),n&&403===n.status&&n.data&&e.$message.warning(n.data.message)})}},methods:{getActivities:function(e){return Object(D.c)(this.pageUID,e)},getReviews:function(e){var t=this;this.reviewDialog.loading=!0,Object(x.d)(this.pageUID,e).then(function(e){var i=e.data,n=i.data,o=i.meta.pagination;t.reviewDialog.loading=!1,t.reviewDialog.reviews=n,t.reviewDialog.pageCount=o.total_pages}).catch(function(){t.reviewDialog.loading=!1})},onToggleFollow:function(){var e=this;this.followBtnLoading=!0;var t=this.userInfo.following?"UNFOLLOW":"FOLLOW";this.$store.dispatch(t,this.pageUID).then(function(){e.followBtnLoading=!1,e.userInfo.following=!e.userInfo.following}).catch(function(){e.followBtnLoading=!1})},onShare:function(){var e=this.$t("app.link")+this.$route.path+"?uid="+this.pageUID;this.$alert(e,this.$t("复制链接"),{confirmButtonText:this.$t("g.confirmBtn")})},onSendMessage:function(){var e=this,t=this.messageDialog.input;if(!t||!t.trim())return this.$message.warning(this.$t("消息不能为空"));this.messageDialog.loading=!0,Object(I.c)(this.pageUID,t).then(function(){e.messageDialog={visible:!1,input:"",loading:!1},e.$message.success(e.$t("发送成功"))}).catch(function(){e.messageDialog.loading=!1})}}},L={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.userInfo.id?i("div",{staticClass:"main-container"},[e.userInfo.can_review?i("my-alert",{attrs:{title:e.$t("您可以评价该用户"),"action-text":e.$t("发表评价")},on:{clickAction:function(t){e.$router.push("/review/post?uid="+e.pageUID)}}}):e._e(),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"content__left"},[i("h2",{directives:[{name:"t",rawName:"v-t",value:"个人资料",expression:"'个人资料'"}],staticClass:"title"}),e._v(" "),i("profile-card",{attrs:{"user-info":e.userInfo}},[e.isCurrentUser?i("el-button",{on:{click:function(t){e.$router.push({path:"/me"})}}},[e._v(e._s(e.$t("编辑个人资料")))]):["designer"===e.userInfo.type?i("el-button",{attrs:{loading:e.followBtnLoading,type:"primary"},on:{click:e.onToggleFollow}},[e._v(e._s(e.userInfo.following?e.$t("已关注"):e.$t("关注")))]):e._e(),e._v(" "),i("el-button",{on:{click:function(t){e.messageDialog.visible=!0}}},[e._v(e._s(e.$t("联系")))])],e._v(" "),i("el-button",{on:{click:e.onShare}},[e._v("\n          "+e._s(e.$t("分享"))+"\n          "),i("i",{staticClass:"el-icon-share"})]),e._v(" "),i("p",{staticClass:"f-12 m0 black-45"},[e._v(e._s(e.$t("浏览量"))+"："+e._s(e.userInfo.views))])],2),e._v(" "),e.isDesigner?[i("h2",{directives:[{name:"t",rawName:"v-t",value:"收到的评价",expression:"'收到的评价'"}],staticClass:"title"}),e._v(" "),i("review-list",{directives:[{name:"loading",rawName:"v-loading",value:e.reviewLoading,expression:"reviewLoading"}],attrs:{reviews:e.reviews},on:{clickBtn:function(t){e.reviewDialog.visible=!0}}})]:e._e()],2),e._v(" "),i("div",{staticClass:"content__right"},[e.isDesigner?[i("div",{staticClass:"flex-title"},[i("h2",{directives:[{name:"t",rawName:"v-t",value:"作品集",expression:"'作品集'"}],staticClass:"title",class:{unactive:"work"!=e.pageType},on:{click:function(t){e.pageType="work"}}}),e._v(" "),i("h2",{directives:[{name:"t",rawName:"v-t",value:"个人动态",expression:"'个人动态'"}],staticClass:"title",class:{unactive:"activity"!=e.pageType},on:{click:function(t){e.pageType="activity"}}})]),e._v(" "),i("keep-alive",["work"===e.pageType?i("work-list"):i("activity-list",{attrs:{"get-activities":e.getActivities,"show-action-button":e.isCurrentUser}})],1)]:[i("h2",{directives:[{name:"t",rawName:"v-t",value:"收到的评价",expression:"'收到的评价'"}],staticClass:"title"}),e._v(" "),i("review-list",{directives:[{name:"loading",rawName:"v-loading",value:e.reviewLoading,expression:"reviewLoading"}],attrs:{reviews:e.reviews},on:{clickBtn:function(t){e.reviewDialog.visible=!0}}})]],2)]),e._v(" "),i("el-dialog",{attrs:{title:e.$t("发送站内信"),visible:e.messageDialog.visible,width:"500px"},on:{"update:visible":function(t){e.$set(e.messageDialog,"visible",t)}}},[i("el-input",{attrs:{placeholder:e.$t("发送成功后，您可在消息列表中查看对话")},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.onSendMessage(t):null}},model:{value:e.messageDialog.input,callback:function(t){e.$set(e.messageDialog,"input",t)},expression:"messageDialog.input"}}),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.messageDialog.visible=!1}}},[e._v(e._s(e.$t("g.cancelBtn")))]),e._v(" "),i("el-button",{attrs:{loading:e.messageDialog.loading,type:"primary"},on:{click:e.onSendMessage}},[e._v(e._s(e.$t("发 送")))])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.$t("所有评价"),visible:e.reviewDialog.visible},on:{"update:visible":function(t){e.$set(e.reviewDialog,"visible",t)}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.reviewDialog.loading,expression:"reviewDialog.loading"}]},[e._l(e.reviewDialog.reviews,function(t){return i("div",{key:t.id,staticClass:"review-item"},[i("div",{staticClass:"review-item__user"},[i("router-link",{attrs:{to:"/profile?uid="+t.reviewer.id}},[i("my-avatar",{staticClass:"review-item__user-avatar",attrs:{"avatar-url":t.reviewer.avatar_url}})],1),e._v(" "),i("div",{staticClass:"review-item__user-info"},[i("router-link",{staticClass:"f-14 bold",attrs:{to:"/profile?uid="+t.reviewer.id}},[e._v(e._s(t.reviewer.name))]),e._v(" "),i("span",{directives:[{name:"t",rawName:"v-t",value:"g."+t.reviewer.type,expression:"`g.${review.reviewer.type}`"}],staticClass:"f-14 black-45"}),e._v(" "),i("p",{staticClass:"m0 f-12 black-45",domProps:{textContent:e._s(t.created_at)}})],1)],1),e._v(" "),i("p",{staticClass:"m0 mt-4 f-12 black-45",domProps:{textContent:e._s(t.content)}})])}),e._v(" "),i("el-pagination",{staticStyle:{"text-align":"center",padding:"16px 0"},attrs:{"current-page":e.reviewDialog.currentPage,"page-count":e.reviewDialog.pageCount,background:"",layout:"prev, pager, next"},on:{"update:currentPage":function(t){e.$set(e.reviewDialog,"currentPage",t)},"current-change":e.getReviews}})],2)])],1):e._e()},staticRenderFns:[]};var O=function(e){i("ksIG")},U=Object(n.a)(P,L,!1,O,"data-v-c2b53968",null),R=i("2VSF");R&&R.__esModule&&(R=R.default),"function"==typeof R&&R(U);t.default=U.exports}});
//# sourceMappingURL=7.e81063f5b4e1f5009b84.js.map