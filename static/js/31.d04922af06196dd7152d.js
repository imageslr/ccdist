webpackJsonp([31],{"57IG":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("XyMi"),r=n("E4LH"),i=n("vMJZ"),s={data:function(){var e=this;return{form:{code:"",identifier:"",password:"",type:null},rules:{identifier:{validator:function(t,n,o){Object(r.d)(n)||Object(r.c)(n)?o():o(e.$t("请输入合法手机号或邮箱"))},trigger:"blur"},code:{required:!0,len:6,message:this.$t("请输入6位验证码"),trigger:"blur"},password:[{required:!0,trigger:"blur",message:this.$t("请输入新密码")},{min:6,max:25,trigger:"blur",message:"密码长度为 6 到 25 个字符"}],type:{required:!0,message:this.$t("请选择用户类型")}},loading:!1,sending:!1,count:0,timer:null}},computed:{sendButtonText:function(){var e=this.count;return e?this.$t("countdown",{count:e}):this.$t("获取验证码")}},methods:{onSend:function(){var e=this;this.$refs.form.validateField("identifier",function(t){if(!t){if(!e.form.type)return e.$message.warning(e.$t("请选择用户类型"));e.sending=!0;var n=e.form,o=n.identifier,s=n.type;(Object(r.d)(o)?function(){return Object(i.m)(o,s,"resetPassword")}:function(){return Object(i.n)(o,"resetPassword")})().then(function(){e.sending=!1,e.count=60,e.countDown()}).catch(function(){e.sending=!1})}})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.loading=!0;var n=e.form,o=n.code,s=n.identifier,a={code:o,password:n.password,type:n.type};Object(r.d)(s)?a.phone=s:a.email=s,Object(i.h)(a).then(function(){e.loading=!1,e.$message.success(e.$t("重置密码成功")),e.$router.push({path:"/signin",replace:!0})}).catch(function(){e.loading=!1})}})},countDown:function(){var e=this;this.count>0?(this.count--,this.timer=setTimeout(function(){e.countDown()},1e3)):clearTimeout(this.timer)}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container both-center"},[n("h1",{directives:[{name:"t",rawName:"v-t",value:"重置密码",expression:"'重置密码'"}]}),e._v(" "),n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,size:"small"}},[n("el-form-item",{attrs:{label:e.$t("用户类型"),prop:"type"}},[n("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("el-radio",{attrs:{label:"party"}},[e._v(e._s(e.$t("甲方")))]),e._v(" "),n("el-radio",{attrs:{label:"designer"}},[e._v(e._s(e.$t("设计师")))])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("手机号 / 邮箱"),prop:"identifier"}},[n("el-input",{model:{value:e.form.identifier,callback:function(t){e.$set(e.form,"identifier",t)},expression:"form.identifier"}},[n("el-button",{attrs:{slot:"append",loading:e.sending,disabled:!!e.count},on:{click:e.onSend},slot:"append"},[e._v(e._s(e.sendButtonText)+" ")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("验证码"),prop:"code"}},[n("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("新密码"),prop:"password"}},[n("el-input",{attrs:{type:"text"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("确 定")))])],1)],1)],1)},staticRenderFns:[]};var c=function(e){n("MjEj")},l=Object(o.a)(s,a,!1,c,"data-v-41883052",null),d=n("RxQI");d&&d.__esModule&&(d=d.default),"function"==typeof d&&d(l);t.default=l.exports},MjEj:function(e,t){},RxQI:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh":{"countdown":"重新获取验证码({count})"},"en":{"重置密码":"Reset Password","手机号 / 邮箱":"Phone Number / Email","用户类型":"User type","设计师":"Designer","甲方":"Party","获取验证码":"Send verification code","验证码":"Verification code","新密码":"New password","确 定":"Submit","请输入合法手机号或邮箱":"Please enter a valid phone number or email","请输入6位验证码":"Please enter 6 characters verification code","请输入原密码":"Please enter the original password","密码长度为 6 到 25 个字符":"Password length is 6 to 25 characters","重置密码成功":"Successfully reset password","请选择用户类型":"Please select user type","countdown":"Resend verification code ({count})"}}'),delete e.options._Ctor}}});
//# sourceMappingURL=31.d04922af06196dd7152d.js.map