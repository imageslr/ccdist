webpackJsonp([14],{"8Ewg":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"汇款信息":"Remittance information","以下是管理员录入的汇款信息：":"The following is the remittance information entered by the administrator:","您填写的汇款信息为：":"The remittance information you filled out is:","请准确填写以下汇款信息，以便工作人员录入：汇款单号、汇款行、汇款人姓名、汇款金额、汇款日期":"Please fill in the following remittance information accurately for the staff to enter: remittance slip number, remittance bank name, remitter name, remittance amount, remittance date","汇款单号":"Remittance slip number","汇款行":"Remittance bank name","汇款人姓名":"Remitter name","汇款金额":"Remittance amount","汇款日期":"Remittance date","信息录入于":"Information recorded in","修 改":"Edit"}}'),delete t.options._Ctor}},LQL9:function(t,e){},Y3rx:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh":{"status":{"500":"已取消","600":"审核未通过","900":"审核中","1000":"报名中","1100":"工作中","1200":"已完成"},"modes":{"free":"自由式","invite":"邀请式","specify":"指定式"}},"en":{"输入项目标题进行搜索":"Enter project title to search","搜索项目":"Search projects","所有项目":"All","审核中":"Reviewing","报名中":"Applying","工作中":"Working","已完成":"Completed","已取消":"Canceled","审核未通过":"Review Failed","发布于":"Published at","查看详情":"View detail","重新加载":"Reload","汇款信息":"Remittance info","设计费汇款详情":"Design fee remittance detail","暂未发放设计费":"Not pay design fee yet","status":{"500":"Canceled","600":"Review Failed","900":"Reviewing","1000":"Applying","1100":"Working","1200":"Completed"},"modes":{"free":"Free mode","invite":"Invite mode","specify":"Specify mode"}}}'),delete t.options._Ctor}},"e+iX":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("XyMi"),a=n("EMlb"),o=n("vjYN"),s=n("woOf"),r=n.n(s),l={data:function(){return{project:{remittance:"",remittance_submitted_at:"",confirmed_remittance:null},visible:!1,content:"",inputDisabled:!1,submitting:!1}},computed:{tableData:function(){var t=this.project.confirmed_remittance;if(!t)return[];var e=t.number,n=t.bank,i=t.name,a=t.amount,o=t.remitted_at,s=t.created_at;return[{label:this.$t("汇款单号"),value:e},{label:this.$t("汇款行"),value:n},{label:this.$t("汇款人姓名"),value:i},{label:this.$t("汇款金额"),value:a},{label:this.$t("汇款日期"),value:o},{label:this.$t("信息录入于"),value:s}]}},methods:{show:function(t){this.project=t,this.content=t.remittance,this.inputDisabled=!!t.remittance,this.visible=!0},onConfirm:function(){var t=this;this.submitting=!0,Object(a.v)(this.project.id,this.content).then(function(e){var n=e.data;t.submitting=!1,t.visible=!1,t.$message.success(t.$t("提交成功")),t.project.remittance=n.remittance,t.project.remittance_submitted_at=n.remittance_submitted_at}).catch(function(){t.submitting=!1})},onClosed:function(){r()(this.$data,this.$options.data())}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{visible:t.visible,title:t.$t("汇款信息")},on:{"update:visible":function(e){t.visible=e},closed:t.onClosed}},[t.project.confirmed_remittance?[n("p",{directives:[{name:"t",rawName:"v-t",value:"以下是管理员录入的汇款信息：",expression:"'以下是管理员录入的汇款信息：'"}],staticClass:"mt0 black-45 f-14"}),t._v(" "),n("el-table",{attrs:{data:t.tableData,"show-header":!1,border:"",stripe:""}},[n("el-table-column",{attrs:{prop:"label",label:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"value",label:" "}})],1),t._v(" "),n("div",{staticClass:"f-14 black-45"},[n("p",{directives:[{name:"t",rawName:"v-t",value:"您填写的汇款信息为：",expression:"'您填写的汇款信息为：'"}]}),t._v(" "),n("p",{domProps:{textContent:t._s(t.project.remittance)}})])]:[n("el-input",{attrs:{disabled:t.inputDisabled,rows:5,placeholder:t.$t("请准确填写以下汇款信息，以便工作人员录入：汇款单号、汇款行、汇款人姓名、汇款金额、汇款日期"),maxlength:1e3,type:"textarea"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),t.content?n("p",{directives:[{name:"t",rawName:"v-t",value:"请准确填写以下汇款信息，以便工作人员录入：汇款单号、汇款行、汇款人姓名、汇款金额、汇款日期",expression:"'请准确填写以下汇款信息，以便工作人员录入：汇款单号、汇款行、汇款人姓名、汇款金额、汇款日期'"}],staticClass:"black-45 mb0"}):t._e(),t._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.visible=!1}}},[t._v(t._s(t.$t("g.cancelBtn")))]),t._v(" "),t.inputDisabled?n("el-button",{on:{click:function(e){t.inputDisabled=!1}}},[t._v(t._s(t.$t("修 改")))]):n("el-button",{attrs:{loading:t.submitting,disabled:!t.content,type:"primary"},on:{click:t.onConfirm}},[t._v(t._s(t.$t("g.confirmBtn")))])],1)]],2)},staticRenderFns:[]};var u=function(t){n("xDCU")},d=Object(i.a)(l,c,!1,u,null,null),p=n("8Ewg");p&&p.__esModule&&(p=p.default),"function"==typeof p&&p(d);var m={components:{RemittanceDialog:d.exports},filters:{statusToType:function(t){return{500:"info",600:"danger",900:"warning",1000:null,1100:null,1200:"info"}[t]}},data:function(){return{projects:[],status:null,keyword:"",keywordInput:"",pageCount:1,currentPage:1,loading:!1,error:!1,favoriteLoadings:{}}},computed:{isFavorite:function(){return"/order/favorite"===this.$route.path}},created:function(){this.$route.query.p&&(this.currentPage=parseInt(this.$route.query.p)),this.$route.query.status&&(this.status=this.$route.query.status),this.$route.query.keyword&&(this.keywordInput=this.keyword=this.$route.query.keyword),this.getProjects()},methods:{getProjects:function(){var t=this;this.loading=!0,this.error=!1;var e=this.currentPage,n=this.status,i=this.keyword;(this.isFavorite?a.j:a.n)(e,{status:n,keyword:i}).then(function(e){var n=e.data,i=n.data,a=n.meta.pagination;t.loading=!1,t.projects=i,t.pageCount=a.total_pages}).catch(function(){t.loading=!1,t.error=!0})},onSearch:function(){this.keywordInput&&this.$router.push({path:this.$route.path,query:{status:this.status,keyword:this.keywordInput}})},onToggleFavorite:function(t){var e=this;if(!this.favoriteLoadings[t]){this.$set(this.favoriteLoadings,t,!0);var n=this.projects[t];(n.favoriting?a.r:a.g)(n.id).then(function(){n.favoriting=!n.favoriting,e.favoriteLoadings[t]=!1}).catch(function(){e.favoriteLoadings[t]=!1})}},onChangePage:function(t){this.$router.push({path:this.$route.path,query:{status:this.status,keyword:this.keywordInput,p:t}})},onNavigate:function(t){this.$router.push({path:this.$route.path,query:{status:"all"===t?null:t,p:1}})},onShowRemittanceDialog:function(t){var e=this.projects[t];this.$refs.remittanceDialog.show(e)},isTendering:function(t){return t.status==o.a.STATUS_TENDERING},isCompleted:function(t){return t.status==o.a.STATUS_COMPLETED}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-menu",{attrs:{"default-active":t.$route.query.status||"all",mode:"horizontal"},on:{select:t.onNavigate}},[n("el-menu-item",{attrs:{index:"all"}},[t._v(t._s(t.$t("所有项目")))]),t._v(" "),t.$isParty()?[n("el-menu-item",{attrs:{index:"900"}},[t._v(t._s(t.$t("审核中")))]),t._v(" "),n("el-menu-item",{attrs:{index:"600"}},[t._v(t._s(t.$t("审核未通过")))])]:t._e(),t._v(" "),n("el-menu-item",{attrs:{index:"1000"}},[t._v(t._s(t.$t("报名中")))]),t._v(" "),n("el-menu-item",{attrs:{index:"1100"}},[t._v(t._s(t.$t("工作中")))]),t._v(" "),n("el-menu-item",{attrs:{index:"1200"}},[t._v(t._s(t.$t("已完成")))]),t._v(" "),n("el-menu-item",{attrs:{index:"500"}},[t._v(t._s(t.$t("已取消")))])],2),t._v(" "),n("div",{staticClass:"container"},[n("el-input",{attrs:{placeholder:t.$t("输入项目标题进行搜索"),size:"small"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSearch(e):null}},model:{value:t.keywordInput,callback:function(e){t.keywordInput=e},expression:"keywordInput"}},[n("el-button",{attrs:{slot:"append",type:"primary"},on:{click:t.onSearch},slot:"append"},[t._v(t._s(t.$t("搜索项目")))])],1),t._v(" "),t.loading||t.error?n("my-loader",{attrs:{loading:t.loading,error:t.error,"btn-text":t.$t("重新加载"),"on-reload":t.getProjects}}):t.projects.length?[n("div",{staticClass:"project-list"},t._l(t.projects,function(e,i){return n("div",{key:e.id,staticClass:"project-list-item"},[n("div",{staticClass:"flex-auto"},[n("el-tag",{attrs:{type:t._f("statusToType")(e.status)}},[t._v(t._s(t.$t("status."+e.status)))]),t._v(" "),n("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.$t("modes."+e.mode)))]),t._v(" "),n("router-link",{staticClass:"project-list-item__title",attrs:{to:"/project/"+e.id,tag:"p"},domProps:{textContent:t._s(e.title)}}),t._v(" "),n("p",{staticClass:"m0 f-14 black-45"},[t._v(t._s(t.$t("发布于"))+"："+t._s(e.created_at))])],1),t._v(" "),n("div",[n("router-link",{attrs:{to:"/project/"+e.id}},[n("el-button",{attrs:{type:"primary",size:"small"}},[t._v("\n                "+t._s(t.$t("查看详情"))+"\n              ")])],1),t._v(" "),t.$isParty()?n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"small"},on:{click:function(e){t.onShowRemittanceDialog(i)}}},[t._v("\n              "+t._s(t.$t("汇款信息"))+"\n            ")]):t._e(),t._v(" "),t.$isDesigner()?[t.isFavorite?n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.favoriteLoadings[i],size:"small"},on:{click:function(e){t.onToggleFavorite(i)}}},[t._v("\n                "+t._s(e.favoriting?t.$t("取消收藏"):t.$t("收藏"))+"\n              ")]):[e.designer_payment?n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"small"},on:{click:function(n){t.$router.push("/payment/"+e.designer_payment.id)}}},[t._v("\n                  "+t._s(t.$t("设计费汇款详情"))+"\n                ")]):t.isCompleted(e)?n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"small",disabled:""}},[t._v("\n                  "+t._s(t.$t("暂未发放设计费"))+"\n                ")]):t._e()]]:t._e()],2)])})),t._v(" "),n("el-pagination",{staticClass:"mt2 center",attrs:{"current-page":t.currentPage,"page-count":t.pageCount,background:"",layout:"prev, pager, next"},on:{"update:currentPage":function(e){t.currentPage=e},"current-change":t.onChangePage}})]:n("my-empty")],2),t._v(" "),n("remittance-dialog",{ref:"remittanceDialog"})],1)},staticRenderFns:[]};var _=function(t){n("LQL9")},f=Object(i.a)(m,v,!1,_,"data-v-ef14c61c",null),h=n("Y3rx");h&&h.__esModule&&(h=h.default),"function"==typeof h&&h(f);e.default=f.exports},xDCU:function(t,e){}});
//# sourceMappingURL=14.58dff952b72d5089624e.js.map