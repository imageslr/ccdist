webpackJsonp([27],{K01m:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh":{"countdown":"重新获取验证码({count})"},"en":{"修改绑定手机号":"Change Phone Number","已绑定手机号":"Current phone number","更换手机号":"New phone number","获取验证码":"Send verification code","验证码":"Verification code","确 定":"Submit","请输入合法手机号":"Please enter a valid phone number","新手机号不能与原手机号相同":"New and original phone number cannot be same","请输入6位验证码":"Please enter 6 characters verification code","修改绑定手机号成功":"Successfully change phone number","countdown":"Resend verification code ({count})"}}'),delete e.options._Ctor}},iqnf:function(e,t){},oLhx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("XyMi"),i=n("E4LH"),r=n("vMJZ"),s={data:function(){var e=this;return{form:{code:"",phone:""},rules:{phone:[{required:!0,pattern:i.b,message:this.$t("请输入合法手机号"),trigger:"blur"},{validator:function(t,n,o){e.form.phone===e.$store.getters.userInfo.phone&&o(new Error(e.$t("新手机号不能与原手机号相同"))),o()}}],code:{required:!0,len:6,message:this.$t("请输入6位验证码"),trigger:"blur"}},loading:!1,sending:!1,count:0,timer:null}},computed:{sendButtonText:function(){var e=this.count;return e?this.$t("countdown",{count:e}):this.$t("获取验证码")}},methods:{onSend:function(){var e=this;if(Object(i.d)(this.form.phone)){this.sending=!0;var t=this.form.phone,n=this.$store.getters.userInfo.type;Object(r.d)(t,n).then(function(){return Object(r.m)(t,n,"changePhone").then(function(){e.sending=!1,e.count=60,e.countDown()})}).catch(function(){e.sending=!1})}else this.$message.warning(this.$t("请输入合法手机号"))},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.loading=!0;var n=e.form,o=n.code,i=n.phone;Object(r.c)(o,i).then(function(){e.loading=!1,e.form={phone:"",code:""},e.$store.commit("SET_PHONE",i),e.$message.success(e.$t("修改绑定手机号成功"))}).catch(function(){e.loading=!1})}})},countDown:function(){var e=this;this.count>0?(this.count--,this.timer=setTimeout(function(){e.countDown()},1e3)):clearTimeout(this.timer)}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("h2",{directives:[{name:"t",rawName:"v-t",value:"修改绑定手机号",expression:"'修改绑定手机号'"}],staticClass:"mt0"}),e._v(" "),n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-position":"top"}},[n("el-form-item",{attrs:{label:e.$t("已绑定手机号")}},[n("el-input",{attrs:{value:e.$store.getters.userInfo.phone,disabled:""}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("更换手机号"),prop:"phone"}},[n("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}},[n("el-button",{attrs:{slot:"append",loading:e.sending,disabled:!!e.count},on:{click:e.onSend},slot:"append"},[e._v(e._s(e.sendButtonText)+" ")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("验证码"),prop:"code"}},[n("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("确 定")))])],1)],1)],1)},staticRenderFns:[]};var a=function(e){n("iqnf")},u=Object(o.a)(s,c,!1,a,"data-v-75865050",null),l=n("K01m");l&&l.__esModule&&(l=l.default),"function"==typeof l&&l(u);t.default=u.exports}});
//# sourceMappingURL=27.c253e3bcfb1e10feacd1.js.map