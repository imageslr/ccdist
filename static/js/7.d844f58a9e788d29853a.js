webpackJsonp([7],{"2VSF":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"个人资料":"Profile","编辑个人资料":"Edit profile","甲方评价":"Client Reviews","设计师评价":"Designer Reviews","收到的评价":"Received Reviews","个人动态":"Personal Activities","已关注":"Following","关注":"Follow","联系":"Contact","分享":"Share","浏览量":"Views","复制链接":"Copy the link","暂未收到评价":"No received reviews","查看所有评价":"View all reviews","所有评价":"All reviews","作品集":"Portfolios","拼命加载中":"Loading user info","发送站内信":"Send direct message","发 送":"Send","您可以评价该用户":"You can review the user","发表评价":"Post review","发送成功后，您可在消息列表中查看对话":"You can view the conversation in the message list once sent","发送成功":"Successfully sent message","消息不能为空":"Message cannot be empty","您无权查看该甲方的信息":"You are not authorized to view the information of the client."}}'),delete t.options._Ctor}},"9SJb":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh":{"following":"关注","follower":"粉丝","viewHomePage":"查看个人主页"},"en":{"following":"Following","follower":"Follower","viewHomePage":"View Home Page"}}'),delete t.options._Ctor}},DqdQ:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"收到的评价":"Received Reviews","暂未收到评价":"No received reviews","查看所有评价":"View all reviews"}}'),delete t.options._Ctor}},GcTu:function(t,e){},Gz0m:function(t,e){},IQE6:function(t,e){},Vyr1:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"加载更多":"Load more","编辑":"Edit","删除":"Delete","确认删除该作品？":"Is it confirmed to delete the work?","上传作品集":"Upload new work"}}'),delete t.options._Ctor}},jzWX:function(t,e){},"w+O/":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("XyMi"),o={props:{userInfo:{type:Object,default:function(){return{id:null,avatar_url:"",name:this.$t("g.loading"),title:"",introduction:"",following_num:0,follower_num:0}}}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("aside",{staticClass:"card profile-card"},[i("div",{staticClass:"profile-card__info"},[i("my-avatar",{staticClass:"profile-card__info-avatar",attrs:{"avatar-url":t.userInfo.avatar_url}}),t._v(" "),i("h1",{staticClass:"m0 mb1"},[t._v(t._s(t.userInfo.name))]),t._v(" "),i("p",{domProps:{textContent:t._s(t.userInfo.title)}}),t._v(" "),t.userInfo.type?i("p",{directives:[{name:"t",rawName:"v-t",value:t.$t("g."+t.userInfo.type),expression:"$t(`g.${userInfo.type}`)"}]}):t._e(),t._v(" "),i("p",{domProps:{textContent:t._s(t.userInfo.introduction)}})],1),t._v(" "),i("div",{staticClass:"profile-card__follow"},[i("div",{staticClass:"p-12"},[i("router-link",{staticClass:"f-20",attrs:{to:"/follow?uid="+t.userInfo.id}},[t._v(t._s(t.userInfo.following_count))]),t._v(" "),i("span",{staticClass:"block f-12 black-65"},[t._v(t._s(t.$t("following")))])],1),t._v(" "),"designer"===t.userInfo.type?[i("my-divider",{attrs:{margin:"12"}}),t._v(" "),i("div",{staticClass:"p-12"},[i("router-link",{staticClass:"f-20",attrs:{to:"/follow?type=follower&uid="+t.userInfo.id}},[t._v(t._s(t.userInfo.follower_count))]),t._v(" "),i("span",{staticClass:"block f-12 black-65"},[t._v(t._s(t.$t("follower")))])],1)]:t._e()],2),t._v(" "),i("div",{staticClass:"profile-card__action"},[t._t("default",[i("el-button",{attrs:{plain:""},on:{click:function(e){t.$router.push("/profile")}}},[t._v(t._s(t.$t("viewHomePage")))])])],2)])},staticRenderFns:[]};var a=function(t){i("GcTu")},r=Object(n.a)(o,s,!1,a,"data-v-47f90198",null),l=i("9SJb");l&&l.__esModule&&(l=l.default),"function"==typeof l&&l(r);var c=r.exports,u=i("xoXj"),v=i("GUlH"),d={data:function(){return{works:[],currentPage:0,loading:!1,nomore:!1,error:!1}},computed:{busy:function(){return this.loading||this.nomore||this.error},pageUID:function(){return this.$route.query.uid||this.$uid()},isCurrentUser:function(){return this.pageUID==this.$uid()}},methods:{likeCountStr:function(t){return t?this.$t("g.like")+" ("+t+")":this.$t("g.like")},onToggleLike:function(t){var e=this.works[t],i=e.liked;(i?v.g:v.f)(e.id).then(function(t){var n=t.data.like_count;e.liked=!i,e.like_count=n})},onReachBottom:function(){var t=this;return this.loading=!0,Object(v.e)(this.pageUID,this.currentPage+1).then(function(e){var i=e.data,n=i.data,o=i.meta.pagination;t.loading=!1,t.works.push.apply(t.works,n),t.currentPage=o.current_page,t.nomore=o.total_pages<=o.current_page}).catch(function(){t.error=!0,t.loading=!1})},onReload:function(){this.error=!1},onPreview:function(t,e){this.$refs.preview.open(t,e)},onEdit:function(t){var e=this.works[t].id;this.$router.push("/work/"+e+"/edit")},onDelete:function(t){var e=this;this.$confirm(this.$t("确认删除该作品？"),this.$t("g.notice"),{confirmButtonText:this.$t("g.confirmBtn"),cancelButtonText:this.$t("g.cancelBtn"),type:"warning"}).then(function(){Object(v.b)(e.works[t].id).then(function(){e.works.splice(t,1),e.$message.success(e.$t("g.successfullyDeleted"))})}).catch(function(){})}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.onReachBottom,expression:"onReachBottom"}],attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"200"}},[t.isCurrentUser?i("el-button",{staticClass:"block w-100 upload-button",attrs:{icon:"el-icon-plus",type:"primary",plain:"",round:"",size:"large"},on:{click:function(e){t.$router.push("/work/add")}}},[t._v(t._s(t.$t("上传作品集")))]):t._e(),t._v(" "),i("transition-group",{attrs:{tag:"div",name:"fade-transform-y"}},t._l(t.works,function(e,n){return i("div",{key:e.id,staticClass:"card work-card"},[t.isCurrentUser?i("el-dropdown",{staticClass:"work-card__dropdown",attrs:{trigger:"click"}},[i("el-button",{attrs:{type:"text",icon:"el-icon-arrow-down"}}),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(e){t.onEdit(n)}}},[t._v(t._s(t.$t("编辑")))]),t._v(" "),i("el-dropdown-item",{nativeOn:{click:function(e){t.onDelete(n)}}},[t._v(t._s(t.$t("删除")))])],1)],1):t._e(),t._v(" "),i("el-carousel",{staticClass:"work-card__carousel",attrs:{autoplay:!1,trigger:"click"}},t._l(e.photo_urls,function(n,o){return i("el-carousel-item",{key:n,nativeOn:{click:function(i){t.onPreview(e.photo_urls,o)}}},[i("img",{staticClass:"work-card__carousel-item",attrs:{src:n}})])})),t._v(" "),i("div",{staticClass:"work-card__info"},[i("p",{staticClass:"work-card__info-title",domProps:{textContent:t._s(e.title)}}),t._v(" "),i("p",{staticClass:"work-card__info-description",domProps:{textContent:t._s(e.description)}}),t._v(" "),i("el-button",{staticClass:"work-card__info-like-btn",class:{"is-liked":e.liked},attrs:{type:"text"},on:{click:function(e){t.onToggleLike(n)}}},[t._v(t._s(t.likeCountStr(e.like_count)))])],1)],1)})),t._v(" "),i("my-loader",{attrs:{loading:t.loading,error:t.error,"btn-text":t.$t("加载更多"),"on-reload":t.onReload}}),t._v(" "),t.nomore?i("p",{directives:[{name:"t",rawName:"v-t",value:t.$t("g.nomore"),expression:"$t('g.nomore')"}],staticClass:"no-more"}):t._e(),t._v(" "),i("my-multi-preview",{ref:"preview"})],1)},staticRenderFns:[]};var f=function(t){i("zdnN")},_=Object(n.a)(d,g,!1,f,"data-v-bba5510e",null),p=i("Vyr1");p&&p.__esModule&&(p=p.default),"function"==typeof p&&p(_);var w=_.exports,m={props:{reviews:{type:Array,required:!0}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card review-card"},[t._l(t.reviews,function(e,n){return n<5?i("div",{key:e.id,staticClass:"review-item"},[i("div",{staticClass:"review-item__user"},[i("router-link",{attrs:{to:"/profile?uid="+e.reviewer.id}},[i("my-avatar",{staticClass:"review-item__user-avatar",attrs:{"avatar-url":e.reviewer.avatar_url}})],1),t._v(" "),i("div",{staticClass:"review-item__user-info"},[i("router-link",{staticClass:"f-14 bold",attrs:{to:"/profile?uid="+e.reviewer.id}},[t._v(t._s(e.reviewer.name))]),t._v(" "),i("span",{directives:[{name:"t",rawName:"v-t",value:"g."+e.reviewer.type,expression:"`g.${review.reviewer.type}`"}],staticClass:"f-14 black-45"}),t._v(" "),i("p",{staticClass:"m0 f-12 black-45",domProps:{textContent:t._s(e.created_at)}})],1)],1),t._v(" "),i("p",{staticClass:"m0 mt-4 f-12 black-45",domProps:{textContent:t._s(e.content)}})]):t._e()}),t._v(" "),t.reviews.length?i("el-button",{staticClass:"center w-100",attrs:{type:"text"},on:{click:function(e){t.$emit("clickBtn")}}},[t._v(t._s(t.$t("查看所有评价"))+" ")]):t._e(),t._v(" "),t.reviews.length?t._e():i("p",{directives:[{name:"t",rawName:"v-t",value:t.$t("暂未收到评价"),expression:"$t('暂未收到评价')"}],staticClass:"m0 p-12 f-12 black-45 center"})],2)},staticRenderFns:[]};var k=function(t){i("Gz0m")},C=Object(n.a)(m,h,!1,k,"data-v-0a082278",null),b=i("DqdQ");b&&b.__esModule&&(b=b.default),"function"==typeof b&&b(C);var $=C.exports,y=i("vMJZ"),D=i("Ty/O"),x=i("ORdI"),I=i("+PoZ"),P={components:{ProfileCard:c,ActivityList:u.a,WorkList:w,ReviewList:$},data:function(){return{userInfo:{name:"加载中",following_count:0,follower_count:0},activities:[],reviews:[],reviewLoading:!0,followBtnLoading:!1,activitiesLoading:!0,activitiesNomore:!1,reviewDialog:{loading:!1,visible:!1,reviews:[],currentPage:1,pageCount:1},messageDialog:{visible:!1,input:"",loading:!1},pageType:"work"}},computed:{pageUID:function(){return this.$route.query.uid||this.$uid()},isDesigner:function(){return"designer"===this.userInfo.type},isCurrentUser:function(){return this.$uid()==this.pageUID}},created:function(){var t=this;if(this.isCurrentUser)this.userInfo=this.$store.getters.userInfo,Object(x.d)(this.pageUID).then(function(e){var i=e.data,n=i.data,o=i.meta.pagination;t.reviews=t.reviewDialog.reviews=n,t.reviewDialog.pageCount=o.total_pages,t.reviewLoading=!1}).catch(function(){t.reviewLoading=!1});else{var e=this.$loading({lock:!0,spinner:"el-icon-loading",text:this.$t("拼命加载中"),background:"rgba(255, 255, 255)"});Object(y.g)(this.pageUID).then(function(i){var n=i.data;t.userInfo=n,e.close(),Object(x.d)(t.pageUID).then(function(e){var i=e.data,n=i.data,o=i.meta.pagination;t.reviews=t.reviewDialog.reviews=n,t.reviewDialog.pageCount=o.total_pages,t.reviewLoading=!1}).catch(function(){t.reviewLoading=!1})}).catch(function(i){var n=i.response;e.close(),n&&403===n.status&&n.data&&t.$message.warning(n.data.message)})}},methods:{getActivities:function(t){return Object(D.c)(this.pageUID,t)},getReviews:function(t){var e=this;this.reviewDialog.loading=!0,Object(x.d)(this.pageUID,t).then(function(t){var i=t.data,n=i.data,o=i.meta.pagination;e.reviewDialog.loading=!1,e.reviewDialog.reviews=n,e.reviewDialog.pageCount=o.total_pages}).catch(function(){e.reviewDialog.loading=!1})},onToggleFollow:function(){var t=this;this.followBtnLoading=!0;var e=this.userInfo.following?"UNFOLLOW":"FOLLOW";this.$store.dispatch(e,this.pageUID).then(function(){t.followBtnLoading=!1,t.userInfo.following=!t.userInfo.following}).catch(function(){t.followBtnLoading=!1})},onShare:function(){var t=this.$t("app.link")+this.$route.path+"?uid="+this.pageUID;this.$alert(t,this.$t("复制链接"),{confirmButtonText:this.$t("g.confirmBtn")})},onSendMessage:function(){var t=this,e=this.messageDialog.input;if(!e||!e.trim())return this.$message.warning(this.$t("消息不能为空"));this.messageDialog.loading=!0,Object(I.c)(this.pageUID,e).then(function(){t.messageDialog={visible:!1,input:"",loading:!1},t.$message.success(t.$t("发送成功"))}).catch(function(){t.messageDialog.loading=!1})}}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.userInfo.id?i("div",{staticClass:"main-container profile-page"},[t.userInfo.can_review?i("my-alert",{attrs:{title:t.$t("您可以评价该用户"),"action-text":t.$t("发表评价")},on:{clickAction:function(e){t.$router.push("/review/post?uid="+t.pageUID)}}}):t._e(),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"content__left"},[i("div",{staticClass:"title"},[i("my-badge-status",{attrs:{text:t.$t("个人资料"),status:"info"}})],1),t._v(" "),i("profile-card",{attrs:{"user-info":t.userInfo}},[t.isCurrentUser?i("el-button",{attrs:{round:""},on:{click:function(e){t.$router.push({path:"/me"})}}},[t._v(t._s(t.$t("编辑个人资料")))]):["designer"===t.userInfo.type?i("el-button",{attrs:{loading:t.followBtnLoading,type:"primary",round:""},on:{click:t.onToggleFollow}},[t._v(t._s(t.userInfo.following?t.$t("已关注"):t.$t("关注")))]):t._e(),t._v(" "),i("el-button",{attrs:{round:""},on:{click:function(e){t.messageDialog.visible=!0}}},[t._v(t._s(t.$t("联系")))])],t._v(" "),i("el-button",{attrs:{round:""},on:{click:t.onShare}},[t._v("\n          "+t._s(t.$t("分享"))+"\n          "),i("i",{staticClass:"el-icon-share"})]),t._v(" "),i("p",{staticClass:"f-14 m0 black-45"},[t._v(t._s(t.$t("浏览量"))+"："),i("span",{staticClass:"bold black-85"},[t._v(t._s(t.userInfo.views))])])],2),t._v(" "),t.isDesigner?[i("div",{staticClass:"title"},[i("my-badge-status",{attrs:{text:t.$t("收到的评价"),status:"info"}})],1),t._v(" "),i("review-list",{directives:[{name:"loading",rawName:"v-loading",value:t.reviewLoading,expression:"reviewLoading"}],attrs:{reviews:t.reviews},on:{clickBtn:function(e){t.reviewDialog.visible=!0}}})]:t._e()],2),t._v(" "),i("div",{staticClass:"content__right"},[t.isDesigner?[i("div",{staticClass:"flex-title"},[i("div",{staticClass:"title",on:{click:function(e){t.pageType="work"}}},[i("my-badge-status",{attrs:{text:t.$t("作品集"),status:"work"==t.pageType?"info":"default"}})],1),t._v(" "),i("div",{staticClass:"title",on:{click:function(e){t.pageType="activity"}}},[i("my-badge-status",{attrs:{text:t.$t("个人动态"),status:"activity"==t.pageType?"info":"default"}})],1)]),t._v(" "),i("keep-alive",["work"===t.pageType?i("work-list"):i("activity-list",{attrs:{"get-activities":t.getActivities,"show-action-button":t.isCurrentUser}})],1)]:[i("div",{staticClass:"title"},[i("my-badge-status",{attrs:{text:t.$t("收到的评价"),status:"info"}})],1),t._v(" "),i("review-list",{directives:[{name:"loading",rawName:"v-loading",value:t.reviewLoading,expression:"reviewLoading"}],attrs:{reviews:t.reviews},on:{clickBtn:function(e){t.reviewDialog.visible=!0}}})]],2)]),t._v(" "),i("el-dialog",{attrs:{title:t.$t("发送站内信"),visible:t.messageDialog.visible,width:"500px"},on:{"update:visible":function(e){t.$set(t.messageDialog,"visible",e)}}},[i("el-input",{attrs:{placeholder:t.$t("发送成功后，您可在消息列表中查看对话")},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSendMessage(e):null}},model:{value:t.messageDialog.input,callback:function(e){t.$set(t.messageDialog,"input",e)},expression:"messageDialog.input"}}),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.messageDialog.visible=!1}}},[t._v(t._s(t.$t("g.cancelBtn")))]),t._v(" "),i("el-button",{attrs:{loading:t.messageDialog.loading,type:"primary"},on:{click:t.onSendMessage}},[t._v(t._s(t.$t("发 送")))])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.$t("所有评价"),visible:t.reviewDialog.visible},on:{"update:visible":function(e){t.$set(t.reviewDialog,"visible",e)}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.reviewDialog.loading,expression:"reviewDialog.loading"}]},[t._l(t.reviewDialog.reviews,function(e){return i("div",{key:e.id,staticClass:"review-item"},[i("div",{staticClass:"review-item__user"},[i("router-link",{attrs:{to:"/profile?uid="+e.reviewer.id}},[i("my-avatar",{staticClass:"review-item__user-avatar",attrs:{"avatar-url":e.reviewer.avatar_url}})],1),t._v(" "),i("div",{staticClass:"review-item__user-info"},[i("router-link",{staticClass:"f-14 bold",attrs:{to:"/profile?uid="+e.reviewer.id}},[t._v(t._s(e.reviewer.name))]),t._v(" "),i("span",{directives:[{name:"t",rawName:"v-t",value:"g."+e.reviewer.type,expression:"`g.${review.reviewer.type}`"}],staticClass:"f-14 black-45"}),t._v(" "),i("p",{staticClass:"m0 f-12 black-45",domProps:{textContent:t._s(e.created_at)}})],1)],1),t._v(" "),i("p",{staticClass:"m0 mt-4 f-12 black-45",domProps:{textContent:t._s(e.content)}})])}),t._v(" "),i("el-pagination",{staticStyle:{"text-align":"center",padding:"16px 0"},attrs:{"current-page":t.reviewDialog.currentPage,"page-count":t.reviewDialog.pageCount,background:"",layout:"prev, pager, next"},on:{"update:currentPage":function(e){t.$set(t.reviewDialog,"currentPage",e)},"current-change":t.getReviews}})],2)])],1):t._e()},staticRenderFns:[]};var O=function(t){i("jzWX"),i("IQE6")},U=Object(n.a)(P,L,!1,O,"data-v-000ceb46",null),R=i("2VSF");R&&R.__esModule&&(R=R.default),"function"==typeof R&&R(U);e.default=U.exports},zdnN:function(t,e){}});
//# sourceMappingURL=7.d844f58a9e788d29853a.js.map